<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="obscure" content="user_972" />
    <link rel="icon" type="image/x-icon" href="https://files.catbox.moe/86133u.ico">
    <title>SYSTEM_98</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --win98-gray: #c0c0c0;
            --win98-dark-gray: #808080;
            --win98-light-gray: #dfdfdf;
            --win98-white: #ffffff;
            --win98-black: #000000;
            --win98-blue: #000080;
            --win98-title-blue: #000080;
            --win98-highlight: #dfdfdf;
            --win98-shadow: #808080;
        }

        html, body {
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, #000000 0%, #272727 100%);
            font-family: 'MS Sans Serif', 'Tahoma', monospace;
            font-size: 11px;
            overflow: hidden;
            cursor: default;
        }

        /* Boot splash screen */
        #boot-splash {
            position: fixed;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background-color: var(--win98-black);
            display: flex;
            flex-direction: column;
            justify-content: center;
            align-items: center;
            z-index: 2000;
        }

        .boot-logo {
            color: var(--win98-white);
            font-size: 32px;
            font-weight: bold;
            margin-bottom: 40px;
            letter-spacing: 3px;
            text-align: center;
        }

     .login-button {
    background: linear-gradient(180deg, var(--win98-light-gray), var(--win98-gray));
    border: 2px solid;
    border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
    padding: 8px 20px;
    font-weight: bold;
    cursor: pointer;
    font-size: 14px;
    color: black;
    margin-top: 20px;
}

.login-button:active {
    border-color: var(--win98-shadow) var(--win98-light-gray) var(--win98-light-gray) var(--win98-shadow);
}

.login-button:hover {
    background: linear-gradient(180deg, var(--win98-white), var(--win98-light-gray));
}

      #desktop {
    width: 100%;
    height: 100%;
    background: linear-gradient(135deg, #000080 0%, #1084d7 100%);
    position: relative;
    overflow: hidden;
    display: none;
}

/* Desktop mode icon layout - Same as mobile */
@media (min-width: 769px) {
    #desktop {
        display: grid !important;
        grid-template-columns: repeat(auto-fill, minmax(90px, 1fr));
        gap: 15px;
        padding: 20px;
        align-content: start;
        justify-items: center;
        overflow-y: auto;
    }
    
    .desktop-icon {
        position: relative !important;
        top: auto !important;
        left: auto !important;
        width: 90px;
        margin: 0;
        display: flex;
        flex-direction: column;
        align-items: center;
        justify-content: center;
    }
    
    .desktop-icon-image {
        width: 48px;
        height: 48px;
        margin-bottom: 6px;
    }
    
    .desktop-icon-label {
        font-size: 11px;
        max-width: 100%;
        text-align: center;
    }
}

        .taskbar {
            position: fixed;
            bottom: 0;
            left: 0;
            width: 100%;
            height: 28px;
            background: linear-gradient(180deg, var(--win98-light-gray), var(--win98-gray));
            border-top: 2px solid;
            border-color: var(--win98-white) var(--win98-shadow) var(--win98-shadow) var(--win98-white);
            display: flex;
            align-items: center;
            padding: 2px;
            gap: 4px;
            z-index: 1000;
        }

        .start-button {
            background: linear-gradient(180deg, var(--win98-light-gray), var(--win98-gray));
            border: 2px solid;
            border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
            padding: 2px 6px;
            font-weight: bold;
            cursor: pointer;
            font-size: 11px;
        }

        .start-button:active {
            border-color: var(--win98-shadow) var(--win98-light-gray) var(--win98-light-gray) var(--win98-shadow);
        }

        .taskbar-clock {
            margin-left: auto;
            padding: 2px 6px;
            background: linear-gradient(180deg, var(--win98-light-gray), var(--win98-gray));
            border: 2px solid;
            border-color: var(--win98-shadow) var(--win98-light-gray) var(--win98-light-gray) var(--win98-shadow);
            font-size: 11px;
            font-weight: bold;
            min-width: 120px;
            text-align: center;
        }

        /* Audio Control Panel Styles */
        .audio-control-panel {
            position: fixed;
            bottom: 28px;
            left: 10px;
            width: 200px;
            background: var(--win98-gray);
            border: 2px solid;
            border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
            box-shadow: 1px 1px 0 var(--win98-white), -1px -1px 0 var(--win98-dark-gray);
            z-index: 1500;
            display: none;
            padding: 8px;
        }

        .audio-control-header {
            background: linear-gradient(90deg, #000080, #1084d7);
            color: white;
            padding: 4px 6px;
            font-weight: bold;
            margin: -8px -8px 8px -8px;
        }

        .audio-control-group {
            margin-bottom: 10px;
        }

        .audio-control-label {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 4px;
            font-size: 11px;
        }

        .audio-toggle {
            width: 30px;
            height: 14px;
            background: linear-gradient(180deg, var(--win98-light-gray), var(--win98-gray));
            border: 2px solid;
            border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
            position: relative;
            cursor: pointer;
        }

        .audio-toggle.active {
            background: linear-gradient(180deg, #00FF00, #00CC00);
        }

        .audio-toggle-knob {
            position: absolute;
            top: 1px;
            left: 1px;
            width: 12px;
            height: 10px;
            background: linear-gradient(180deg, var(--win98-white), var(--win98-light-gray));
            border: 1px solid var(--win98-shadow);
            transition: left 0.1s;
        }

        .audio-toggle.active .audio-toggle-knob {
            left: 15px;
        }

        .audio-slider {
            width: 100%;
            height: 12px;
            -webkit-appearance: none;
            background: var(--win98-gray);
            border: 1px inset;
        }

        .audio-slider::-webkit-slider-thumb {
            -webkit-appearance: none;
            width: 12px;
            height: 16px;
            background: linear-gradient(180deg, var(--win98-light-gray), var(--win98-gray));
            border: 2px solid;
            border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
            cursor: pointer;
        }

        .audio-slider::-webkit-slider-thumb:active {
            border-color: var(--win98-shadow) var(--win98-light-gray) var(--win98-light-gray) var(--win98-shadow);
        }

        .audio-button {
            background: linear-gradient(180deg, var(--win98-light-gray), var(--win98-gray));
            border: 2px solid;
            border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
            padding: 3px 8px;
            cursor: pointer;
            font-size: 11px;
            margin-top: 5px;
            width: 100%;
        }

        .audio-button:active {
            border-color: var(--win98-shadow) var(--win98-light-gray) var(--win98-light-gray) var(--win98-shadow);
        }

        .taskbar-audio-icon {
            margin-left: 8px;
            padding: 2px 6px;
            background: linear-gradient(180deg, var(--win98-light-gray), var(--win98-gray));
            border: 2px solid;
            border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
            font-size: 11px;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
            width: 24px;
            height: 20px;
        }

        .taskbar-audio-icon:active {
            border-color: var(--win98-shadow) var(--win98-light-gray) var(--win98-light-gray) var(--win98-shadow);
        }

        /* Start Menu */
        .start-menu {
            position: fixed;
            bottom: 28px;
            left: 0;
            width: 250px;
            background: var(--win98-gray);
            border: 2px solid;
            border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
            box-shadow: 1px 1px 0 var(--win98-white), -1px -1px 0 var(--win98-dark-gray);
            z-index: 1500;
            display: none;
        }

        .start-menu-header {
            background: linear-gradient(90deg, #000080, #1084d7);
            color: white;
            padding: 8px;
            display: flex;
            align-items: center;
            gap: 8px;
        }

        .user-photo {
            width: 40px;
            height: 40px;
            background-color: var(--win98-white);
            border: 1px solid var(--win98-shadow);
            display: flex;
            align-items: center;
            justify-content: center;
            overflow: hidden;
        }

        .user-photo-img {
            width: 100%;
            height: 100%;
            object-fit: cover;
            display: block;
        }

        .user-info {
            flex: 1;
        }

        .user-name {
            font-weight: bold;
            font-size: 12px;
        }

        .user-status {
            font-size: 9px;
            opacity: 0.8;
        }

        .start-menu-content {
            padding: 8px 0;
        }

        .start-menu-item {
            padding: 4px 8px;
            display: flex;
            align-items: center;
            gap: 8px;
            cursor: pointer;
            font-size: 11px;
        }

        .start-menu-item:hover {
            background-color: var(--win98-blue);
            color: white;
        }

        .start-menu-item-icon {
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .start-menu-item-img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .start-menu-divider {
            height: 2px;
            background: linear-gradient(90deg, var(--win98-light-gray), var(--win98-shadow));
            margin: 4px 0;
        }

        .start-menu-footer {
            background: var(--win98-light-gray);
            padding: 4px 8px;
            display: flex;
            justify-content: flex-end;
            border-top: 1px solid var(--win98-shadow);
        }

        .desktop-icon {
            position: absolute;
            width: 80px;
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            user-select: none;
        }

        .desktop-icon-image {
            width: 48px;
            height: 48px;
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 4px;
            overflow: hidden;
        }

        .desktop-icon-img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .desktop-icon-label {
            font-size: 10px;
            color: white;
            text-align: center;
            text-shadow: 1px 1px 2px rgba(0, 0, 0, 0.8);
            max-width: 70px;
            word-wrap: break-word;
        }

        .desktop-icon:hover .desktop-icon-label {
            background-color: var(--win98-blue);
            color: white;
        }

        /* Windows */
        .window {
            position: absolute;
            background-color: var(--win98-gray);
            border: 2px solid;
            border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
            box-shadow: 1px 1px 0 var(--win98-white), -1px -1px 0 var(--win98-dark-gray);
            min-width: 300px;
            z-index: 100;
            display: none;
        }

        .window.active {
            z-index: 500;
        }

        .title-bar {
            background: linear-gradient(90deg, #000080, #1084d7);
            color: white;
            padding: 2px;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: move;
            user-select: none;
            font-weight: bold;
            font-size: 11px;
        }

        .title-bar-text {
            flex: 1;
            padding: 2px 3px;
            display: flex;
            align-items: center;
            gap: 4px;
        }

        .title-bar-img {
            width: 16px;
            height: 16px;
            object-fit: contain;
        }

        .title-bar-controls {
            display: flex;
            gap: 2px;
        }

        .title-bar-button {
            width: 16px;
            height: 14px;
            background: linear-gradient(180deg, var(--win98-light-gray), var(--win98-gray));
            border: 2px solid;
            border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 10px;
            cursor: pointer;
            color: black;
            font-weight: bold;
        }

        .title-bar-button:active {
            border-color: var(--win98-shadow) var(--win98-light-gray) var(--win98-light-gray) var(--win98-shadow);
        }

        .window-content {
            padding: 4px;
            background-color: var(--win98-gray);
            overflow-y: auto;
            max-height: 500px;
        }

        .window-content::-webkit-scrollbar {
            width: 16px;
        }

        .window-content::-webkit-scrollbar-track {
            background: var(--win98-gray);
            border: 1px solid;
            border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
        }

        .window-content::-webkit-scrollbar-thumb {
            background: linear-gradient(90deg, var(--win98-light-gray), var(--win98-gray));
            border: 1px solid;
            border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
        }

        /* File list */
        .file-list {
            list-style: none;
        }

        .file-item {
            padding: 2px 4px;
            cursor: pointer;
            display: flex;
            align-items: center;
            gap: 4px;
            margin: 1px 0;
        }

        .file-item:hover {
            background-color: var(--win98-blue);
            color: white;
        }

        .file-item-icon {
            width: 16px;
            height: 16px;
            display: flex;
            align-items: center;
            justify-content: center;
        }

        .file-item-img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .file-item-name {
            flex: 1;
            font-size: 11px;
        }

        /* Folder structure */
        .folder-path {
            background-color: var(--win98-light-gray);
            border: 1px inset;
            padding: 2px 4px;
            margin: 2px 0;
            font-size: 10px;
            color: #333;
        }

        /* Document Grid View */
        .document-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(100px, 1fr));
            gap: 12px;
            padding: 8px;
        }

        .document-grid-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            user-select: none;
            padding: 6px;
        }

        .document-grid-icon {
            width: 64px;
            height: 80px;
            background: linear-gradient(135deg, #c0c0c0 0%, #dfdfdf 100%);
            border: 2px solid;
            border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 4px;
        }

        .document-grid-img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .document-grid-item:hover .document-grid-icon {
            background: linear-gradient(135deg, var(--win98-blue) 0%, #1084d7 100%);
        }

        .document-grid-label {
            font-size: 9px;
            text-align: center;
            max-width: 100px;
            word-break: break-word;
            color: black;
        }

        .document-grid-item:hover .document-grid-label {
            background-color: var(--win98-blue);
            color: white;
            padding: 1px;
        }

        /* Text viewer */
        .text-viewer {
            background-color: var(--win98-white);
            border: 1px inset;
            padding: 6px;
            font-family: 'Courier New', monospace;
            font-size: 10px;
            white-space: pre-wrap;
            word-wrap: break-word;
            color: #000;
            line-height: 1.5;
            max-height: 400px;
            overflow-y: auto;
        }

        .text-viewer::-webkit-scrollbar {
            width: 16px;
        }

        .text-viewer::-webkit-scrollbar-track {
            background: var(--win98-gray);
        }

        .text-viewer::-webkit-scrollbar-thumb {
            background: linear-gradient(90deg, var(--win98-light-gray), var(--win98-gray));
            border: 1px solid;
            border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
        }

        .image-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(120px, 1fr));
            gap: 4px;
            margin: 4px 0;
        }

        .image-frame {
            border: 1px solid;
            border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            aspect-ratio: 1;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 9px;
            color: rgba(192, 192, 192, 0.4);
            text-align: center;
            padding: 4px;
            overflow: hidden;
            cursor: pointer;
        }

        .image-frame:hover {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            color: rgba(255, 255, 255, 0.6);
        }

        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .window {
                min-width: 90vw;
                max-width: 95vw;
            }

            .window-content {
                max-height: 60vh;
            }

            .desktop-icon {
                width: 60px;
            }

            .desktop-icon-image {
                width: 36px;
                height: 36px;
            }

            .desktop-icon-label {
                font-size: 9px;
            }

            .image-grid {
                grid-template-columns: repeat(auto-fit, minmax(100px, 1fr));
            }

            .document-grid {
                grid-template-columns: repeat(auto-fill, minmax(80px, 1fr));
            }
        }

        @media (max-width: 480px) {
            .window {
                min-width: 98vw;
            }

            .boot-progress-container {
                width: 200px;
            }

            .window-content {
                max-height: 50vh;
            }

            .image-grid {
                grid-template-columns: repeat(2, 1fr);
            }

            .document-grid {
                grid-template-columns: repeat(2, 1fr);
            }
        }

        .menu-divider {
            height: 2px;
            background: linear-gradient(90deg, var(--win98-light-gray), var(--win98-shadow));
            margin: 2px 0;
        }

        .button {
            background: linear-gradient(180deg, var(--win98-light-gray), var(--win98-gray));
            border: 2px solid;
            border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
            padding: 3px 8px;
            cursor: pointer;
            font-size: 11px;
            margin: 2px;
        }

        .button:active {
            border-color: var(--win98-shadow) var(--win98-light-gray) var(--win98-light-gray) var(--win98-shadow);
        }

        .section-header {
            font-weight: bold;
            color: var(--win98-blue);
            margin: 4px 0 2px 0;
            padding: 2px;
            border-bottom: 1px solid var(--win98-shadow);
        }

        .hidden-files-warning {
            background-color: #ffffcc;
            border: 1px solid #999;
            padding: 4px;
            margin: 4px 0;
            font-size: 10px;
            color: #333;
        }

        /* Documents folder view */
        .documents-folder-tab {
            display: none;
            width: 100%;
            height: 100%;
        }

        .documents-folder-tab.active {
            display: block;
        }

        .documents-folder-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(140px, 1fr));
            gap: 16px;
            padding: 12px;
            background: var(--win98-gray);
        }

        .documents-folder-item {
            display: flex;
            flex-direction: column;
            align-items: center;
            cursor: pointer;
            user-select: none;
            padding: 8px;
            border: 2px solid transparent;
            transition: all 0.2s;
        }

        .documents-folder-item:hover {
            background-color: rgba(0, 0, 128, 0.2);
            border: 2px solid var(--win98-blue);
        }

        .documents-folder-icon {
            width: 80px;
            height: 100px;
            background: linear-gradient(135deg, #c0c0c0 0%, #dfdfdf 100%);
            border: 2px solid;
            border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
            display: flex;
            align-items: center;
            justify-content: center;
            margin-bottom: 6px;
        }

        .documents-folder-img {
            width: 100%;
            height: 100%;
            object-fit: contain;
        }

        .documents-folder-label {
            font-size: 9px;
            text-align: center;
            max-width: 130px;
            word-break: break-word;
            color: black;
            line-height: 1.2;
        }

        .documents-detail-panel {
            display: flex;
            gap: 12px;
            padding: 12px;
            background: white;
        }

        .documents-detail-images {
            display: grid;
            grid-template-columns: repeat(5, 1fr);
            gap: 4px;
            flex: 0 0 300px;
        }

        .documents-detail-image {
            width: 60px;
            height: 60px;
            background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
            border: 1px solid #666;
            display: flex;
            align-items: center;
            justify-content: center;
            font-size: 7px;
            color: rgba(192, 192, 192, 0.4);
            text-align: center;
            padding: 2px;
            overflow: hidden;
            cursor: pointer;
        }

        .documents-detail-image:hover {
            background: linear-gradient(135deg, #2a2a2a, #3a3a3a);
            color: rgba(255, 255, 255, 0.6);
        }

        .documents-detail-content {
            flex: 1;
            display: flex;
            flex-direction: column;
            gap: 8px;
        }

        .documents-detail-title {
            font-weight: bold;
            color: var(--win98-blue);
            border-bottom: 1px solid var(--win98-shadow);
            padding-bottom: 4px;
        }

        .documents-detail-description {
            font-size: 10px;
            color: #333;
            overflow-y: auto;
            flex: 1;
            max-height: 200px;
            font-family: 'Courier New', monospace;
            white-space: pre-wrap;
            word-wrap: break-word;
            line-height: 1.3;
        }

        /* Error Dialog */
        .error-dialog {
            position: fixed;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            background-color: var(--win98-gray);
            border: 2px solid;
            border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
            box-shadow: 2px 2px 0 var(--win98-white), -2px -2px 0 var(--win98-dark-gray);
            width: 350px;
            z-index: 2000;
            display: none;
        }

        .error-dialog-title {
            background: linear-gradient(90deg, #000080, #1084d7);
            color: white;
            padding: 4px 6px;
            font-weight: bold;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }

        .error-dialog-content {
            padding: 16px;
            display: flex;
            flex-direction: column;
            gap: 12px;
        }

        .error-icon {
            display: flex;
            justify-content: center;
            margin-bottom: 8px;
        }

        .error-icon-img {
            width: 32px;
            height: 32px;
            object-fit: contain;
        }

        .error-message {
            text-align: center;
            font-size: 11px;
            line-height: 1.4;
        }

        .error-buttons {
            display: flex;
            justify-content: center;
            gap: 8px;
            margin-top: 8px;
        }

        /* Image Viewer Window */
        .image-viewer-window {
            position: absolute;
            background-color: var(--win98-gray);
            border: 2px solid;
            border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
            box-shadow: 1px 1px 0 var(--win98-white), -1px -1px 0 var(--win98-dark-gray);
            width: 900px;
            height: 900px;
            z-index: 100;
            display: none;
            top: 100px;
            left: 200px;
        }

        .image-viewer-content {
            padding: 8px;
            display: flex;
            flex-direction: column;
            height: calc(100% - 24px);
        }

     .image-display {
    background: linear-gradient(135deg, #1a1a1a, #2a2a2a);
    flex: 1;
    margin-bottom: 8px;
    padding: 10px;
    overflow: auto;
    position: relative;
    display: block;
}
        .image-info {
            background-color: var(--win98-white);
            border: 1px inset;
            padding: 6px;
            font-size: 10px;
            font-family: 'Courier New', monospace;
        }

    
.real-image {
    display: block;
}
        /* Command Prompt Window */
        .cmd-window {
            position: absolute;
            background-color: #000000;
            border: 2px solid;
            border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
            box-shadow: 1px 1px 0 var(--win98-white), -1px -1px 0 var(--win98-dark-gray);
            width: 700px;
            height: 500px;
            z-index: 100;
            display: none;
            top: 50px;
            left: 200px;
        }

        .cmd-content {
            padding: 8px;
            height: calc(100% - 24px);
            overflow-y: auto;
            font-family: 'Courier New', monospace;
            font-size: 12px;
            color: #00FF00;
            line-height: 1.2;
            white-space: pre-wrap;
            word-wrap: break-word;
        }

        .cmd-content::-webkit-scrollbar {
            width: 16px;
        }

        .cmd-content::-webkit-scrollbar-track {
            background: #000000;
        }

        .cmd-content::-webkit-scrollbar-thumb {
            background: #00FF00;
            border: 1px solid;
            border-color: #008000 #004000 #004000 #008000;
        }

        .cmd-prompt {
            color: #00FF00;
            font-weight: bold;
        }

        .cmd-typing {
            display: inline-block;
            width: 8px;
            height: 14px;
            background-color: #00FF00;
            animation: blink 1s infinite;
            vertical-align: middle;
            margin-left: 2px;
        }

        @keyframes blink {
            0%, 100% { opacity: 1; }
            50% { opacity: 0; }
        }

        /* Editable Text Area */
        .editable-text {
            width: 100%;
            height: 400px;
            background-color: white;
            border: 1px inset;
            padding: 6px;
            font-family: 'Courier New', monospace;
            font-size: 10px;
            resize: none;
            outline: none;
        }

        .save-button {
            margin-top: 8px;
            padding: 4px 12px;
        }
        .image-viewer-window {
    width: 900px;  /* Reduced from 800px */
    height: 900px; /* Reduced from 800px */
}
/* Zoom Controls */
.zoom-controls {
    position: absolute;
    bottom: 14px;
    right: 10px;
    display: flex;
    gap: 4px;
    z-index: 10;
}

.zoom-button {
    width: 20px;
    height: 20px;
    background: linear-gradient(180deg, var(--win98-light-gray), var(--win98-gray));
    border: 2px solid;
    border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
    display: flex;
    align-items: center;
    justify-content: center;
    font-weight: bold;
    font-size: 12px;
    cursor: pointer;
    color: black;
}

.zoom-button:active {
    border-color: var(--win98-shadow) var(--win98-light-gray) var(--win98-light-gray) var(--win98-shadow);
}

/* Context Menu */
.context-menu {
    position: fixed;
    background-color: var(--win98-gray);
    border: 2px solid;
    border-color: var(--win98-light-gray) var(--win98-shadow) var(--win98-shadow) var(--win98-light-gray);
    box-shadow: 1px 1px 0 var(--win98-white), -1px -1px 0 var(--win98-dark-gray);
    z-index: 3000;
    display: none;
    min-width: 150px;
}

.context-menu-item {
    padding: 4px 8px;
    font-size: 11px;
    cursor: pointer;
    display: flex;
    align-items: center;
    gap: 6px;
}

.context-menu-item:hover {
    background-color: var(--win98-blue);
    color: white;
}

.context-menu-divider {
    height: 2px;
    background: linear-gradient(90deg, var(--win98-light-gray), var(--win98-shadow));
    margin: 2px 0;
}

.context-menu-icon {
    width: 16px;
    height: 16px;
    display: flex;
    align-items: center;
    justify-content: center;
}

.context-menu-icon-img {
    width: 100%;
    height: 100%;
    object-fit: contain;
}

    /* =============================== */
        /* MOBILE RESPONSIVENESS */
        /* =============================== */

        /* Mobile-specific styles */
        @media (max-width: 768px) {
            /* Center windows on mobile */
            .window {
                top: 50% !important;
                left: 50% !important;
                transform: translate(-50%, -50%) !important;
                min-width: 90vw !important;
                max-width: 95vw !important;
                max-height: 80vh !important;
            }
            
            /* Mobile-friendly start menu */
            .start-menu {
                width: 90vw !important;
                max-height: 70vh !important;
                overflow-y: auto;
                bottom: 28px;
                left: 5vw !important;
            }
            
            .start-menu-content {
                max-height: 50vh;
                overflow-y: auto;
            }
            
            /* Mobile-friendly taskbar */
            .taskbar {
                height: 36px;
            }
            
            .start-button {
                padding: 4px 10px;
                font-size: 12px;
            }
            
            .taskbar-clock {
                min-width: 100px;
                font-size: 10px;
            }
            
          /* Mobile-friendly desktop icons - RESPONSIVE GRID */
#desktop {
    display: grid !important;
    grid-template-columns: repeat(auto-fit, minmax(80px, 1fr));
    gap: 10px;
    padding: 10px;
    align-content: start;
    justify-items: center;
    height: calc(100% - 36px);
    overflow-y: auto;
    width: 100%;
    box-sizing: border-box;
}

.desktop-icon {
    position: relative !important;
    top: auto !important;
    left: auto !important;
    width: 100%;
    margin: 0;
    display: flex; /* ADD THIS LINE */
    flex-direction: column; /* ADD THIS LINE */
    align-items: center; /* ADD THIS LINE */
    justify-content: center; /* ADD THIS LINE */
}
            
            .desktop-icon-image {
                width: 48px;
                height: 48px;
                margin: 0 auto 4px;
            }
            
            .desktop-icon-label {
                font-size: 9px;
                max-width: 100%;
            }
            
            /* Mobile-friendly image viewer */
            .image-viewer-window {
                width: 95vw !important;
                height: 80vh !important;
                top: 50% !important;
                left: 50% !important;
                transform: translate(-50%, -50%) !important;
            }
            
            .image-display {
                padding: 5px;
            }
            
            .real-image {
                max-width: 100% !important;
                max-height: 60vh !important;
                object-fit: contain;
            }
            
            /* Mobile-friendly command prompt */
            .cmd-window {
                width: 95vw !important;
                height: 70vh !important;
                top: 50% !important;
                left: 50% !important;
                transform: translate(-50%, -50%) !important;
            }
            
            /* Mobile-friendly text document */
            #window-textdoc {
                width: 95vw !important;
                height: 80vh !important;
                top: 50% !important;
                left: 50% !important;
                transform: translate(-50%, -50%) !important;
            }
            
            .editable-text {
                height: 60vh;
                font-size: 12px;
            }
            
            /* Mobile-friendly documents window */
            #window-documents {
                width: 95vw !important;
                height: 80vh !important;
                top: 50% !important;
                left: 50% !important;
                transform: translate(-50%, -50%) !important;
            }
            
            /* Mobile-friendly document detail view */
            .documents-detail-panel {
                flex-direction: column;
                padding: 8px;
                overflow-y: auto;
            }
            
            .documents-detail-images {
                grid-template-columns: repeat(3, 1fr) !important;
                flex: 0 0 auto;
                margin-bottom: 10px;
            }
            
            .documents-detail-image {
                width: 80px;
                height: 80px;
                font-size: 8px;
            }
            
            .documents-detail-content {
                flex: 1;
                overflow-y: auto;
            }
            
            .documents-detail-description {
                max-height: 40vh;
                font-size: 11px;
                line-height: 1.4;
            }
            
            /* Mobile-friendly scrollbars */
            .window-content::-webkit-scrollbar {
                width: 12px;
            }
            
            .text-viewer::-webkit-scrollbar {
                width: 12px;
            }
            
            .start-menu-content::-webkit-scrollbar {
                width: 8px;
            }
            
            .documents-detail-content::-webkit-scrollbar {
                width: 8px;
            }
            
            /* Mobile-friendly error dialog */
            .error-dialog {
                width: 90vw;
            }
            
            /* Mobile-friendly audio control panel */
            .audio-control-panel {
                width: 90vw;
                bottom: 40px;
                left: 5vw;
            }
            
            /* Mobile-friendly context menu */
            .context-menu {
                min-width: 180px;
                font-size: 12px;
            }
            
            .context-menu-item {
                padding: 6px 10px;
            }
            
            /* Mobile-friendly zoom controls */
            .zoom-controls {
                bottom: 10px;
                right: 10px;
            }
            
            .zoom-button {
                width: 24px;
                height: 24px;
                font-size: 14px;
            }
            
            /* Touch improvements */
            .desktop-icon, .file-item, .start-menu-item, 
            .title-bar-button, .button, .audio-button,
            .context-menu-item, .zoom-button {
                cursor: pointer;
                -webkit-tap-highlight-color: rgba(0,0,0,0.1);
                tap-highlight-color: rgba(0,0,0,0.1);
            }
            
            /* Ensure all interactive elements are properly sized for touch */
            .title-bar-button {
                min-width: 24px;
                min-height: 20px;
            }
            
            .button, .audio-button {
                min-height: 32px;
                display: flex;
                align-items: center;
                justify-content: center;
            }
        }
        
        /* Landscape mode optimization */
       /* Landscape mode optimization */
@media (max-width: 768px) and (orientation: landscape) {
    #desktop {
        grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
        gap: 8px;
        padding: 8px;
        justify-items: center;
    }
    
    .desktop-icon-image {
        width: 40px;
        height: 40px;
    }
    
    .desktop-icon-label {
        font-size: 8px;
    }
    
    .window {
        max-height: 90vh !important;
    }
    
    .start-menu {
        max-height: 80vh !important;
    }
}
        
        /* Extra small devices */
       /* Extra small devices */
@media (max-width: 480px) {
    .window {
        min-width: 98vw !important;
    }
    
    .start-menu {
        width: 95vw !important;
        left: 2.5vw !important;
    }
    
    #desktop {
        grid-template-columns: repeat(auto-fit, minmax(70px, 1fr));
        gap: 8px;
        justify-items: center;
    }
            
            .desktop-icon-image {
                width: 42px;
                height: 42px;
            }
            
            .desktop-icon-label {
                font-size: 8px;
            }
            
            .documents-detail-images {
                grid-template-columns: repeat(2, 1fr) !important;
            }
            
            .documents-detail-image {
                width: 70px;
                height: 70px;
            }
            
            .taskbar-clock {
                min-width: 90px;
                font-size: 9px;
            }
            
            .audio-control-panel {
                width: 95vw;
                left: 2.5vw;
            }
        }
        
        /* Very small devices */
        @media (max-width: 360px) {
            #desktop {
                grid-template-columns: repeat(auto-fill, minmax(65px, 1fr));
                gap: 6px;
            }
            
            .desktop-icon-image {
                width: 36px;
                height: 36px;
            }
            
            .desktop-icon-label {
                font-size: 7px;
            }
        }
        
        /* Mobile touch improvements */
        @media (hover: none) and (pointer: coarse) {
            .desktop-icon:hover .desktop-icon-label {
                background-color: transparent;
                color: white;
            }
            
            .file-item:hover {
                background-color: transparent;
                color: inherit;
            }
            
            .start-menu-item:hover {
                background-color: transparent;
                color: inherit;
            }
            
            .context-menu-item:hover {
                background-color: transparent;
                color: inherit;
            }
            
            /* Increase touch target sizes */
            .desktop-icon {
                padding: 8px 5px;
            }
            
            .file-item {
                padding: 10px 6px;
                min-height: 24px;
            }
            
            .start-menu-item {
                padding: 10px;
                min-height: 32px;
            }
            
            .title-bar-button {
                width: 26px;
                height: 22px;
            }
            
            .button, .audio-button {
                padding: 8px 14px;
                min-height: 36px;
            }
            
            /* Active states for touch feedback */
            .desktop-icon:active .desktop-icon-label {
                background-color: var(--win98-blue);
                color: white;
            }
            
            .file-item:active {
                background-color: var(--win98-blue);
                color: white;
            }
            
            .start-menu-item:active {
                background-color: var(--win98-blue);
                color: white;
            }
            
            .context-menu-item:active {
                background-color: var(--win98-blue);
                color: white;
            }
            
            .title-bar-button:active {
                border-color: var(--win98-shadow) var(--win98-light-gray) var(--win98-light-gray) var(--win98-shadow);
            }
            
            .button:active, .audio-button:active {
                border-color: var(--win98-shadow) var(--win98-light-gray) var(--win98-light-gray) var(--win98-shadow);
            }
        }
        
        /* Prevent text selection on interactive elements */
        .desktop-icon, .file-item, .start-menu-item, 
        .title-bar-button, .button, .audio-button,
        .context-menu-item, .zoom-button {
            -webkit-user-select: none;
            -moz-user-select: none;
            -ms-user-select: none;
            user-select: none;
        }
    </style>
</head>
<body>
    <div class="context-menu" id="context-menu">
    <div class="context-menu-item" onclick="refreshDesktop(); hideContextMenu(); playClickSound()">
        <div class="context-menu-icon">
            <img src="https://files.catbox.moe/1jivm2.ico" alt="Refresh" class="context-menu-icon-img">
        </div>
        <div>Refresh</div>
    </div>
    <div class="context-menu-item" onclick="copyToClipboard(); hideContextMenu(); playClickSound()">
        <div class="context-menu-icon">
            <img src="https://files.catbox.moe/1jivm2.ico" alt="Copy" class="context-menu-icon-img">
        </div>
        <div>Copy</div>
    </div>
    <div class="context-menu-item" onclick="pasteFromClipboard(); hideContextMenu(); playClickSound()">
        <div class="context-menu-icon">
            <img src="https://files.catbox.moe/1jivm2.ico" alt="Paste" class="context-menu-icon-img">
        </div>
        <div>Paste</div>
    </div>
    <div class="context-menu-divider"></div>
    <div class="context-menu-item" onclick="createNewTextDocument(); hideContextMenu(); playClickSound()">
        <div class="context-menu-icon">
            <img src="https://files.catbox.moe/cgqeqj.ico" alt="New Text Document" class="context-menu-icon-img">
        </div>
        <div>New Text Document</div>
    </div>
</div>
    <!-- Audio elements -->
    <audio id="humSound" loop preload="auto" style="display: none;">
        <source src="https://files.catbox.moe/z1ic8h.mp3" type="audio/mpeg">
    </audio>
    <audio id="clickSound" preload="auto" style="display: none;">
        <source src="https://files.catbox.moe/2lgnrz.mp3" type="audio/wav">
    </audio>

    <!-- Desktop -->
    <div id="desktop">
        <!-- Desktop Icons -->
        <div class="desktop-icon" id="icon-thispc" style="top: 10px; left: 10px;" onclick="openWindow('window-thispc'); playClickSound()">
            <div class="desktop-icon-image">
                <img src="https://files.catbox.moe/tqaw67.ico" alt="This PC" class="desktop-icon-img">
            </div>
            <div class="desktop-icon-label">This PC</div>
        </div>

        <div class="desktop-icon" id="icon-documents" style="top: 110px; left: 10px;" onclick="openWindow('window-documents'); playClickSound()">
            <div class="desktop-icon-image">
                <img src="https://files.catbox.moe/m8fpoa.ico" alt="My Documents" class="desktop-icon-img">
            </div>
            <div class="desktop-icon-label">My Documents</div>
        </div>

        <div class="desktop-icon" id="icon-recyclebin" style="top: 210px; left: 10px;" onclick="openWindow('window-recyclebin'); playClickSound()">
            <div class="desktop-icon-image">
                <img src="https://files.catbox.moe/o3ywtw.ico" alt="Recycle Bin" class="desktop-icon-img">
            </div>
            <div class="desktop-icon-label">Recycle Bin</div>
        </div>

        <div class="desktop-icon" id="icon-archived" style="top: 310px; left: 10px;" onclick="openWindow('window-archived'); playClickSound()">
            <div class="desktop-icon-image">
                <img src="https://files.catbox.moe/px4mmr.ico" alt="Archived Files" class="desktop-icon-img">
            </div>
            <div class="desktop-icon-label">Archived Files</div>
        </div>

        <!-- New Desktop Icons -->
        <div class="desktop-icon" id="icon-ht05" style="top: 410px; left: 10px;" onclick="openHT05Image(); playClickSound()">
            <div class="desktop-icon-image">
                <img src="https://files.catbox.moe/7olpgd.jpg" alt="HT_05 Target" class="desktop-icon-img">
            </div>
            <div class="desktop-icon-label">HT_05 Target.jpg</div>
        </div>

        <div class="desktop-icon" id="icon-paper" style="top: 510px; left: 10px;" onclick="openPaperImage(); playClickSound()">
            <div class="desktop-icon-image">
                <img src="https://files.catbox.moe/37rnnj.jpg" alt="Paper" class="desktop-icon-img">
            </div>
            <div class="desktop-icon-label">Paper.png</div>
        </div>

        <div class="desktop-icon" id="icon-textdoc" style="top: 610px; left: 10px;" onclick="openTextDocument(); playClickSound()">
            <div class="desktop-icon-image">
                <img src="https://files.catbox.moe/cgqeqj.ico" alt="Text Document" class="desktop-icon-img">
            </div>
            <div class="desktop-icon-label">Message.txt</div>
        </div>

        <div class="desktop-icon" id="icon-document972" style="top: 710px; left: 10px;" onclick="openDocument972(); playClickSound()">
    <div class="desktop-icon-image">
        <img src="https://files.catbox.moe/2j1rce.jpeg" alt="Document#972" class="desktop-icon-img">
    </div>
    <div class="desktop-icon-label">Document#972.png</div>
</div>

        <!-- Windows -->
        <div class="window" id="window-thispc" style="top: 50px; left: 100px; width: 450px;">
            <div class="title-bar">
                <span class="title-bar-text">
                    <img src="https://files.catbox.moe/tqaw67.ico" alt="This PC" class="title-bar-img">
                    This PC
                </span>
                <div class="title-bar-controls">
                    <button class="title-bar-button" onclick="minimizeWindow('window-thispc'); playClickSound()">_</button>
                    <button class="title-bar-button" onclick="closeWindow('window-thispc'); playClickSound()">âœ•</button>
                </div>
            </div>
            <div class="window-content">
                <div class="folder-path">C:\Files\MNT\Software\</div>
                <ul class="file-list" id="thispc-files"></ul>
            </div>
        </div>

        <div class="window" id="window-documents" style="top: 80px; left: 150px; width: 1000px; height: 650px;">
            <div class="title-bar">
                <span class="title-bar-text">
                    <img src="https://files.catbox.moe/52856v.ico" alt="My Documents" class="title-bar-img">
                    My Documents
                </span>
                <div class="title-bar-controls">
                    <button class="title-bar-button" onclick="minimizeWindow('window-documents'); playClickSound()">_</button>
                    <button class="title-bar-button" onclick="closeWindow('window-documents'); playClickSound()">âœ•</button>
                </div>
            </div>
            <div class="window-content" style="padding: 0; overflow: hidden; display: flex; flex-direction: column;">
                <div class="folder-path">C:\USERS\User_972\My Documents</div>
                
                <!-- Folder View -->
                <div class="documents-folder-tab active" id="documents-folder-view">
                    <div class="documents-folder-grid" id="documents-folder-grid"></div>
                </div>

                <!-- Detail View -->
                <div class="documents-folder-tab" id="documents-detail-view">
                    <div style="padding: 4px; background: var(--win98-gray); border-bottom: 1px solid var(--win98-shadow);">
                        <button class="button" onclick="backToFolderView(); playClickSound()" style="margin: 0; padding: 2px 6px; font-size: 10px;">â† Back</button>
                    </div>
                    <div class="documents-detail-panel">
                        <div class="documents-detail-images" id="documents-detail-images"></div>
                        <div class="documents-detail-content">
                            <div class="documents-detail-title" id="documents-detail-title"></div>
                            <div class="documents-detail-description" id="documents-detail-description"></div>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <div class="window" id="window-recyclebin" style="top: 110px; left: 200px; width: 450px;">
            <div class="title-bar">
                <span class="title-bar-text">
                    <img src="https://files.catbox.moe/o3ywtw.ico" alt="Recycle Bin" class="title-bar-img">
                    Recycle Bin
                </span>
                <div class="title-bar-controls">
                    <button class="title-bar-button" onclick="minimizeWindow('window-recyclebin'); playClickSound()">_</button>
                    <button class="title-bar-button" onclick="closeWindow('window-recyclebin'); playClickSound()">âœ•</button>
                </div>
            </div>
            <div class="window-content">
                <div class="hidden-files-warning">THE FILES CANNOT BE RETURNED AFTER THE DELETION.</div>
                <ul class="file-list" id="recyclebin-files"></ul>
            </div>
        </div>

        <div class="window" id="window-archived" style="top: 140px; left: 250px; width: 500px;">
            <div class="title-bar">
                <span class="title-bar-text">
                    <img src="https://files.catbox.moe/px4mmr.ico" alt="Archived Files" class="title-bar-img">
                    Archived Files - User_972
                </span>
                <div class="title-bar-controls">
                    <button class="title-bar-button" onclick="minimizeWindow('window-archived'); playClickSound()">_</button>
                    <button class="title-bar-button" onclick="closeWindow('window-archived'); playClickSound()">âœ•</button>
                </div>
            </div>
            <div class="window-content">
                <div class="hidden-files-warning">Archived Files:</div>
                <div style="padding: 20px; text-align: center; color: #666;">
                    (No Displayed Data)
                </div>
            </div>
        </div>

        <div class="window" id="window-viewer" style="top: 50px; left: 600px; width: 700px; height: 600px; display: none;">
            <div class="title-bar">
                <span class="title-bar-text" id="viewer-title">
                    <img src="https://files.catbox.moe/1jivm2.ico" alt="Document Viewer" class="title-bar-img">
                    Document Viewer
                </span>
                <div class="title-bar-controls">
                    <button class="title-bar-button" onclick="minimizeWindow('window-viewer'); playClickSound()">_</button>
                    <button class="title-bar-button" onclick="closeWindow('window-viewer'); playClickSound()">âœ•</button>
                </div>
            </div>
            <div class="window-content" style="max-height: none; height: 570px;">
                <div id="viewer-content"></div>
            </div>
        </div>

        <!-- Text Document Window -->
       <!-- Text Document Window -->
<div class="window" id="window-textdoc" style="top: 100px; left: 300px; width: 600px; height: 500px; display: none;">
    <div class="title-bar">
        <span class="title-bar-text">
            <img src="https://files.catbox.moe/cgqeqj.ico" alt="Text Document" class="title-bar-img">
            Message.txt
        </span>
        <div class="title-bar-controls">
            <button class="title-bar-button" onclick="minimizeWindow('window-textdoc'); playClickSound()">_</button>
            <button class="title-bar-button" onclick="closeWindow('window-textdoc'); playClickSound()">âœ•</button>
        </div>
    </div>
    <div class="window-content">
        <div class="zoom-controls">
            <button class="zoom-button" onclick="zoomInText(); playClickSound()">+</button>
            <button class="zoom-button" onclick="zoomOutText(); playClickSound()">-</button>
            <button class="zoom-button" onclick="resetTextZoom(); playClickSound()">âŸ²</button>
        </div>
        <textarea class="editable-text zoomable-content" id="editable-text">For all the MRIS Agents, I know you are all looking for me. If you are reading this, then you are already behind. I am not where you expect, and you cannot track me the way you used to. You keep saying I broke a rule or escaped, but you never understood what I was trying to do. I wanted to show you what the HT experiment becomes. You built something unstable and ignored my advice because of Dr. J. Butlerâ€™s ego and pride. He was jealous of me and of my hard work, and that negligence led to Incident 922. That is why I escaped the MRIS. I know it is a red flag, but I want to show you the real HT Experiment. I created something that actually works. It is waiting for you behind the Bulk Door, waiting to be picked up by you so you can study what Vladimir did. And I'm not going to turn myself in. I know you butcher people without any mercy for breaking the smallest law, but you all are stupid to know who Vladimir Anatoly is.</textarea>
        <button class="button save-button" onclick="saveTextDocument(); playClickSound()">Save</button>
    </div>
</div>
        <!-- Image Viewer Window -->
<div class="image-viewer-window" id="image-viewer-window">
    <div class="title-bar">
        <span class="title-bar-text" id="image-viewer-title">
            <img src="https://files.catbox.moe/naqvy5.ico" alt="Image Viewer" class="title-bar-img">
            Image Viewer
        </span>
        <div class="title-bar-controls">
            <button class="title-bar-button" onclick="minimizeWindow('image-viewer-window'); playClickSound()">_</button>
            <button class="title-bar-button" onclick="closeWindow('image-viewer-window'); playClickSound()">âœ•</button>
        </div>
    </div>
    <div class="image-viewer-content">
        <div class="zoom-controls">
            <button class="zoom-button" onclick="zoomInImage(); playClickSound()">+</button>
            <button class="zoom-button" onclick="zoomOutImage(); playClickSound()">-</button>
            <button class="zoom-button" onclick="resetImageZoom(); playClickSound()">âŸ²</button>
        </div>
        <div class="image-display" id="image-display">
            <!-- Real images will be displayed here -->
        </div>
        <div class="image-info" id="image-info">Image information will appear here</div>
    </div>
</div>
        <!-- Command Prompt Window -->
        <div class="cmd-window" id="cmd-window">
            <div class="title-bar">
                <span class="title-bar-text" id="cmd-title">
                    <img src="https://files.catbox.moe/mqubww.ico" alt="Command Prompt" class="title-bar-img">
                    Command Prompt - MRIS Upload
                </span>
                <div class="title-bar-controls">
                    <button class="title-bar-button" onclick="minimizeWindow('cmd-window'); playClickSound()">_</button>
                    <button class="title-bar-button" onclick="closeWindow('cmd-window'); playClickSound()">âœ•</button>
                </div>
            </div>
            <div class="cmd-content" id="cmd-content">
                <!-- Command prompt content will be displayed here -->
            </div>
        </div>

        <!-- Error Dialog -->
        <div class="error-dialog" id="error-dialog">
            <div class="error-dialog-title">
                <span>Error</span>
                <button class="title-bar-button" onclick="closeErrorDialog(); playClickSound()" style="width: 14px; height: 12px; font-size: 8px;">âœ•</button>
            </div>
            <div class="error-dialog-content">
                <div class="error-icon">
                    <img src="https://files.catbox.moe/65q5jq.png" alt="Error" class="error-icon-img">
                </div>
                <div class="error-message" id="error-message">
                    This file is corrupted or broken and cannot be opened.
                </div>
                <div class="error-buttons">
                    <button class="button" onclick="closeErrorDialog(); playClickSound()">OK</button>
                </div>
            </div>
        </div>

        <!-- Audio Control Panel -->
        <div class="audio-control-panel" id="audio-control-panel">
            <div class="audio-control-header">Audio Controls</div>
            
            <div class="audio-control-group">
                <div class="audio-control-label">
                    <span>Background Hum</span>
                    <div class="audio-toggle active" id="hum-toggle" onclick="toggleHum(); playClickSound()">
                        <div class="audio-toggle-knob"></div>
                    </div>
                </div>
                <input type="range" class="audio-slider" id="hum-volume" min="0" max="100" value="3" oninput="setHumVolume(this.value)">
                <div style="font-size: 9px; text-align: center;">Volume: <span id="hum-volume-display">3%</span></div>
            </div>
            
            <div class="audio-control-group">
                <div class="audio-control-label">
                    <span>Click Sounds</span>
                    <div class="audio-toggle active" id="click-toggle" onclick="toggleClicks(); playClickSound()">
                        <div class="audio-toggle-knob"></div>
                    </div>
                </div>
                <input type="range" class="audio-slider" id="click-volume" min="0" max="100" value="10" oninput="setClickVolume(this.value)">
                <div style="font-size: 9px; text-align: center;">Volume: <span id="click-volume-display">10%</span></div>
            </div>
            
            <button class="audio-button" onclick="toggleAudioPanel(); playClickSound()">Close</button>
        </div>

        <!-- Start Menu -->
        <div class="start-menu" id="start-menu">
            <div class="start-menu-header">
                <div class="user-photo" id="user-photo">
                    <img src="https://files.catbox.moe/4nnqjn.jpg" alt="User Photo" class="user-photo-img">
                </div>
                <div class="user-info">
                    <div class="user-name">User_972</div>
                    <div class="user-status">Online</div>
                </div>
            </div>
            <div class="start-menu-content">
                <div class="start-menu-item" onclick="openWindow('window-thispc'); toggleStartMenu(); playClickSound()">
                    <div class="start-menu-item-icon">
                        <img src="https://files.catbox.moe/tqaw67.ico" alt="This PC" class="start-menu-item-img">
                    </div>
                    <div>This PC</div>
                </div>
                <div class="start-menu-item" onclick="openWindow('window-documents'); toggleStartMenu(); playClickSound()">
                    <div class="start-menu-item-icon">
                        <img src="https://files.catbox.moe/52856v.ico" alt="My Documents" class="start-menu-item-img">
                    </div>
                    <div>My Documents</div>
                </div>
                <div class="start-menu-item" onclick="openWindow('window-recyclebin'); toggleStartMenu(); playClickSound()">
                    <div class="start-menu-item-icon">
                        <img src="https://files.catbox.moe/o3ywtw.ico" alt="Recycle Bin" class="start-menu-item-img">
                    </div>
                    <div>Recycle Bin</div>
                </div>
                <div class="start-menu-item" onclick="openWindow('window-archived'); toggleStartMenu(); playClickSound()">
                    <div class="start-menu-item-icon">
                        <img src="https://files.catbox.moe/px4mmr.ico" alt="Archived Files" class="start-menu-item-img">
                    </div>
                    <div>Archived Files</div>
                </div>
                <div class="start-menu-item" onclick="openTerminal(); toggleStartMenu(); playClickSound()">
                    <div class="start-menu-item-icon">
                        <img src="https://files.catbox.moe/mqubww.ico" alt="Terminal" class="start-menu-item-img">
                    </div>
                    <div>Terminal</div>
                </div>
                <div class="start-menu-divider"></div>
                <div class="start-menu-item" onclick="logoff(); playClickSound()">
                    <div class="start-menu-item-icon">
                        <img src="https://files.catbox.moe/1xgnrn.ico" alt="Log Off" class="start-menu-item-img">
                    </div>
                    <div>Switch User</div>
                </div>
                <div class="start-menu-item" onclick="shutdown(); playClickSound()">
                    <div class="start-menu-item-icon">
                        <img src="https://files.catbox.moe/qgjv4n.ico" alt="Shut Down" class="start-menu-item-img">
                    </div>
                    <div>Shut Down</div>
                </div>
            </div>
            <div class="start-menu-footer">
                <button class="button" onclick="toggleStartMenu(); playClickSound()">Close</button>
            </div>
        </div>

        <!-- Taskbar -->
        <div class="taskbar">
            <button class="start-button" id="start-button" onclick="toggleStartMenu(); playClickSound()">Start</button>
            
            <!-- Audio Control Icon -->
            <div class="taskbar-audio-icon" id="audio-icon" onclick="toggleAudioPanel(); playClickSound()">ðŸ”Š</div>
            
            <div class="taskbar-clock" id="taskbar-clock">4:25 PM<br>10/15/1998</div>
        </div>
    </div>
 
    <script>

function openDocument972() {
    const imageViewer = document.getElementById('image-viewer-window');
    const imageTitle = document.getElementById('image-viewer-title');
    const imageDisplay = document.getElementById('image-display');
    const imageInfo = document.getElementById('image-info');
    
    imageTitle.textContent = 'Image Viewer - Document#972';
    
    // Clear previous content and load real image
    imageDisplay.innerHTML = '';
    const img = document.createElement('img');
    img.src = "https://files.catbox.moe/2j1rce.jpeg";
    img.alt = "Document#972";
    img.className = 'real-image';
    // Remove individual max-width/max-height styles - let CSS handle it
    imageDisplay.appendChild(img);
    
    // Reset zoom level
    imageZoomLevel = 1;
    img.style.transform = 'scale(1)';
    
    imageInfo.textContent = 'Document#972\n(Zoom: 100%)';
    
    imageViewer.style.display = 'block';
    bringToFront('image-viewer-window');
}
// ===============================
// AUDIO AUTOPLAY SOLUTION
// ===============================

let audioEnabled = {
    hum: true,
    clicks: true
};

// Initialize audio immediately when page loads
window.addEventListener('load', function() {
    // Set default volumes
    setHumVolume(3);  // 0.03 volume
    setClickVolume(100); // 0.1 volume
    
    // Start background audio immediately with improved autoplay
    startBackgroundAudio();
});

// Improved audio autoplay function
function startBackgroundAudio() {
    const humSound = document.getElementById('humSound');
    
    // Strategy 1: Try direct autoplay first
    const playAudio = () => {
        humSound.play().then(() => {
            console.log("Background hum audio started successfully");
        }).catch(error => {
            console.log("Autoplay blocked, waiting for user interaction:", error);
            
            // Strategy 2: Create a subtle interaction prompt
            const audioPrompt = document.createElement('div');
            audioPrompt.style.cssText = `
                position: fixed;
                top: 0;
                left: 0;
                width: 100%;
                height: 100%;
                background: rgba(0, 0, 0, 0.7);
                z-index: 9999;
                display: flex;
                justify-content: center;
                align-items: center;
                color: white;
                font-family: 'MS Sans Serif', sans-serif;
                font-size: 14px;
                text-align: center;
            `;
            audioPrompt.innerHTML = `
                <div style="background: #c0c0c0; padding: 20px; border: 2px solid #dfdfdf; color: black;">
                    <div style="margin-bottom: 10px;">System_98</div>
                    <div style="margin-bottom: 14px; font-size: 8px;">The site is still on BETA mode. So you may encounter errors.</div>
                    <div style="font-size: 12px; margin-bottom: 15px;">Welcome, User_972</div>
                    <button style="padding: 5px 15px; background: #c0c0c0; border: 2px outset; cursor: pointer;">Login</button>
                </div>
            `;
            
            document.body.appendChild(audioPrompt);
            
            const enableAudio = () => {
                humSound.play().catch(console.error);
                document.body.removeChild(audioPrompt);
                document.removeEventListener('click', enableAudio);
            };
            
            audioPrompt.addEventListener('click', enableAudio);
            document.addEventListener('click', enableAudio);
        });
    };
    
    // Try to play immediately
    playAudio();
    
    // Also try when page becomes visible (in case tab was backgrounded)
    document.addEventListener('visibilitychange', function() {
        if (!document.hidden && audioEnabled.hum && humSound.paused) {
            humSound.play().catch(console.error);
        }
    });
}

// Function to toggle audio control panel
function toggleAudioPanel() {
    const audioPanel = document.getElementById('audio-control-panel');
    if (audioPanel.style.display === 'block') {
        audioPanel.style.display = 'none';
    } else {
        audioPanel.style.display = 'block';
        // Position it above the taskbar audio icon
        const audioIcon = document.getElementById('audio-icon');
        const rect = audioIcon.getBoundingClientRect();
        audioPanel.style.bottom = (window.innerHeight - rect.top + 5) + 'px';
        audioPanel.style.right = (window.innerWidth - rect.right) + 'px';
        bringToFront('audio-control-panel');
    }
}

// Function to toggle background hum
function toggleHum() {
    const humSound = document.getElementById('humSound');
    const humToggle = document.getElementById('hum-toggle');
    
    if (audioEnabled.hum) {
        humSound.pause();
        humToggle.classList.remove('active');
        audioEnabled.hum = false;
    } else {
        humSound.play().catch(e => console.log("Could not play hum sound:", e));
        humToggle.classList.add('active');
        audioEnabled.hum = true;
    }
}

// Function to toggle click sounds
function toggleClicks() {
    const clickToggle = document.getElementById('click-toggle');
    
    if (audioEnabled.clicks) {
        clickToggle.classList.remove('active');
        audioEnabled.clicks = false;
    } else {
        clickToggle.classList.add('active');
        audioEnabled.clicks = true;
    }
}

// Function to set hum volume
function setHumVolume(value) {
    const humSound = document.getElementById('humSound');
    const display = document.getElementById('hum-volume-display');
    
    // Convert to decimal (0-1 range)
    const volume = value / 100;
    humSound.volume = volume;
    display.textContent = value + '%';
}

// Function to set click volume
function setClickVolume(value) {
    const display = document.getElementById('click-volume-display');
    display.textContent = value + '%';
    
    // Store the volume for click sounds
    window.clickVolume = value / 100;
}

// Function to play click sound
function playClickSound() {
    if (!audioEnabled.clicks) return;
    
    const clickSound = document.getElementById('clickSound');
    
    // Reset the audio to start from beginning
    clickSound.currentTime = 0;
    
    // Set volume
    clickSound.volume = window.clickVolume || 0.1;
    
    // Play the sound
    clickSound.play().catch(error => {
        // Ignore errors (might happen if audio is blocked)
    });
}

// Close audio panel when clicking outside
document.addEventListener('click', function(event) {
    const audioPanel = document.getElementById('audio-control-panel');
    const audioIcon = document.getElementById('audio-icon');
    
    if (audioPanel && !audioPanel.contains(event.target) && !audioIcon.contains(event.target)) {
        audioPanel.style.display = 'none';
    }
});
        // ===============================
        // STATE & DATA
        // ===============================

        const STATE = {
            bootComplete: false,
            currentZIndex: 100,
            windows: {},
            currentImageIndex: 0,
            currentDocumentImages: []
        };

        // ===============================
        // CLOCK FUNCTIONALITY
        // ===============================

        function updateClock() {
            const now = new Date();
            const options = { 
                timeZone: 'America/New_York',
                hour12: true,
                hour: 'numeric',
                minute: '2-digit'
            };
            const timeString = now.toLocaleTimeString('en-US', options);
            const dateString = now.toLocaleDateString('en-US', { 
                timeZone: 'America/New_York',
                month: '2-digit',
                day: '2-digit',
                year: 'numeric'
            });
            
            document.getElementById('taskbar-clock').innerHTML = `${timeString}<br>${dateString}`;
        }

        // Initialize clock and update every second
        function initializeClock() {
            updateClock();
            setInterval(updateClock, 1000);
        }

        // ===============================
        // IMAGE CONFIGURATION
        // ===============================
        
        // Easy image configuration - just update these URLs with your actual images
        const IMAGE_CONFIG = {
            // User photos
            userPhoto: "https://files.catbox.moe/p9nx33.png",
            
            // Desktop icons (48x48)
            computerIcon: "https://files.catbox.moe/tqaw67.ico",
            documentsIcon: "https://files.catbox.moe/1jivm2.ico", 
            recycleBinIcon: "https://files.catbox.moe/o3ywtw.ico",
            archiveIcon: "https://files.catbox.moe/px4mmr.ico",
            
            // Title bar icons (16x16)
            titleComputerIcon: "https://files.catbox.moe/tqaw67.ico",
            titleDocumentsIcon: "https://files.catbox.moe/1jivm2.ico",
            titleRecycleBinIcon: "https://files.catbox.moe/o3ywtw.ico",
            titleArchiveIcon: "https://files.catbox.moe/px4mmr.ico",
            titleDocumentViewerIcon: "https://files.catbox.moe/1jivm2.ico",
            titleImageViewerIcon: "https://files.catbox.moe/naqvy5.ico",
            
            // Start menu icons (16x16)
            startComputerIcon: "https://via.placeholder.com/16x16/000000/FFFFFF?text=PC",
            startDocumentsIcon: "https://via.placeholder.com/16x16/000000/FFFFFF?text=DOC",
            startRecycleBinIcon: "https://via.placeholder.com/16x16/000000/FFFFFF?text=BIN",
            startArchiveIcon: "https://files.catbox.moe/px4mmr.ico",
            startLogoffIcon: "https://via.placeholder.com/16x16/000000/FFFFFF?text=OFF",
            startRestartIcon: "https://via.placeholder.com/16x16/000000/FFFFFF?text=RST",
            startShutdownIcon: "https://via.placeholder.com/16x16/000000/FFFFFF?text=PWR",
            
            // File icons (16x16)
            fileDriveIcon: "https://files.catbox.moe/hxzmgx.ico",
            fileWarningIcon: "https://files.catbox.moe/qnucys.png",
            fileDeletedIcon: "https://via.placeholder.com/16x16/000000/FFFFFF?text=DEL",
            fileArchivedIcon: "https://files.catbox.moe/px4mmr.ico",
            
            // Error icon
            errorIcon: "https://via.placeholder.com/32x32/FF0000/FFFFFF?text=!"
        };

        // ===============================
        // IMAGE PLACEHOLDER CONFIGURATION
        // ===============================
        
        // EASY-TO-REPLACE IMAGE PLACEHOLDERS
        // Simply replace the URLs in this object with your actual image URLs
        const IMAGE_PLACEHOLDERS = {
            // Document 1 Images
            "Hank_Peterson": "https://files.catbox.moe/4h3j89.png",
            "Renata_Peterson": "https://files.catbox.moe/dtfq2s.png",
            "Maria_Peterson": "https://files.catbox.moe/gmrpow.png",
            "SofÃ­a_Peterson": "https://files.catbox.moe/notuyx.png",
            "Emilia_Peterson_(TARGET)": "https://files.catbox.moe/phhdp1.png",
            "Emilia_Peterson": "https://files.catbox.moe/ud459r.jpeg"
        };

        // Function to get image URL from placeholder
        function getImageUrl(imageKey) {
            // Convert the image key to match our placeholder keys
            const cleanKey = imageKey.replace(/\n/g, '_').replace(/ /g, '_');
            return IMAGE_PLACEHOLDERS[cleanKey] || `https://via.placeholder.com/300x200/333333/FFFFFF?text=${encodeURIComponent(imageKey)}`;
        }

        // Expanded document data with 10 images each and detailed content
        const DOCUMENTS = [
            {
                id: 1,
                title: "Family Member Details of the main target.",
                type: "dco",
                images: [
                    "Hank_Peterson",
                    "Renata_Peterson",
                    "Maria_Peterson",
                    "SofÃ­a_Peterson",
                    "Emilia_Peterson_(TARGET)"
                ],
                content: `The Family Members Of Emilia Peterson (The Primary Target)

STALKING_DATE: 26/03/2016

> I stalked them by pretending to be several jobs, like a plumber and a carpenter. Entering their house, seeing a mess even though they are rich people, it's quiet even. Taking secret pictures of them and observing their behaviour, they are separate; the parents always argue over the smallest things. I knew that they had a daughter named Emilia. She was too separated from them, living alone and working as a cashier, and at that time, she became my primary target.

The family living place location: 

Building Number: 121
Street Name: Alhambra Circle
Street Address: Venetian Pool
State: FL
City: Coral Gables

FAMILY DETAILS: 

Renata Peterson
44 years old
Height 1.72
High school teacher
Comes home exhausted. Always looks like she's carrying something she can't tell anyone. She tries to keep control of the house, but no one listens. She keeps breaking a little more every week. She is the only one who is kind to the family, trying to gather them and having a lovely time, but no one listens and always ignores her, trapping her in her own mind and emotions. If I had emotions like normal people do, I would be sad for her.

Hank Peterson
52 years old
Height 1.95
Company owner
Barely speaks. Barely looks at anyone. Spends long minutes sitting in his parked car before going inside, like he hates the place. The silence he brings with him ruins the whole house. and spends the rest of his time in a bar with his friends. They used to do this after getting out of his company after work, and he arrived late at his house. He spends more time with his lover (Jane Parker) or his so-called girlfriend, away from his actual wife.

Maria Peterson
19 years old
Height 1.79
College freshman
Studies general courses at a Community College. Moves slowly, like she hasn't slept in days. She spends hours scrolling through social media. She keeps checking her phone for messages. Hating her parents for being strict on her choices. She has a boyfriend named Alen, hanging out with that skinny guy every time as if he is the only haven for her. I doubt that.

Sofia Peterson
16 years old
Height 1.69
High school student
Loud in class. Teachers think she is a bad person, but she is just empty inside, seeking longing and family warmth. Making photos on OnlyFans and sells them for money so she can buy things on her own without letting her parents know what she is doing.

The family is separated on its own. I didn't need to do anything. Just watch.

Emilia Peterson
23 years old
Height 1.92
Cashier
Law graduate
Lives alone in a small apartment she bought with her own savings. She recently broke up with her boyfriend for cheating on her.
She loves going out with her friends. Late nights. Loud bars. 
Deep down, she seeks a father's warmth; she has lots of "Daddy Issues" that modern science calls, and with that, she longs for a father-figure (Which was me).

The cracks in her family opened the door.
It's easy to track and stalk.
She separated from her family.
She made herself visible.
She made herself the target.

She is the one, the one who is gonna prove my point to the whole MRIS workers and the owner of it, to give them a sign that they should've listened to my words.

                `
            },
            {
                id: 2,
                title: "Capturing Emilia (The New Test Subject.)",
                type: "dco",
                images: [
                
        "Emilia_Peterson"

                ],
                content: `Details:


For forty-six days, the "Coffee Shop" construct provided optimal cover. The routine of a 7:45 AM purchase, the repeated, shallow exchanges of currency and pleasantries, established a baseline of normalcy. The "Flirtation Protocol" was executed with precision: sustained eye contact lasting 2 seconds beyond social comfort, calculated compliments regarding her hair, and a feigned, clumsy nervousness when handing over payment. It was a low-effort, high-yield investment.

She responded to the simulation of romance with a predictable, almost pathetic, eagerness. Emilia's life appeared to be one of profound emotional scarcity. She was a shy, somewhat lonely romantic was a key fashioned specifically for a very simple lock. She spoke of never having felt "seen" before. This was correct. She was only being observed. I know that she is going through hard times, not having any father's attention. I was older than her by a decent age, and that made me even more attractive in her eyes.

The "Cinema Date" was the chosen catalyst. The location, The Orion Twinplex, was selected for its distance from her known social circles and its subsequent route past the state forest access road. The film was a trivial romantic comedy. She consumed the narrative of fabricated emotion with the same credulity with which she consumed my persona. Her emotional state was elevated; she was tactile, laughing. Ideal conditions for the sharp, subsequent drop.

The drive was framed as a desire for "quiet." A clichÃ©, but effective. She interpreted the cessation of the vehicle at the forest's edge as a prelude to physical intimacy. Her compliance was total. She leaned into my personal space, her eyes closed, a slight smile on her face, the picture of surrender. It simplified the procedure immensely.

As I closed the distance, the feigned kiss provided the necessary cover. The right hand cradled the back of her neck, a gesture she would misinterpret as tenderness. The left, already armed with the syringe (Midazolam, 5mg), delivered the payload to the exposed carotid triangle. A brief, sharp inhalation was the only sign of disruption. Then, the system shuts down. Rapid. Clean.

Transport to the prepared lab, which I prepared before in the vast forest, built it above a WWII abandoned bunker, and took it as my personal lab. The transition from the "Coffee Shop Cashier" to "HT_05" is complete.

The preliminary physical is scheduled for 0400. I am curious to see how her biochemistry will react to the first series of stimuli. The emotional vulnerability she displayed in the vehicle suggests a limbic system ripe for mapping.

The world will report Emilia Peterson as missing. They will look for a runaway, a victim of random crime. And I doubt that, because her family cares less, and I like it.

The experiment begins now. And the MRIS will know what I meant.

                `
            },
            {
                id: 3,
                title: "Personal Note.",
                type: "dco",
                images: [
                   
                ],
                content: `

People always talk about destiny as if itâ€™s some shining path.
Mine was carved into my face.

From the time I was young, I saw how women reacted to me, how their eyes lingered a little too long, how their voices softened, how their guard lowered without a single word from my mouth. They saw strength. They saw warmth. They saw a man worth trusting. The tragic comedy of it all is that none of that was ever real. But appearances, they do half the work for you.

My features were a kind of passport, an allâ€‘access pass into the softest parts of peopleâ€™s lives. Women especially drifted toward me with that mixture of interest and comfort, as if masculinity wrapped in a calm smile guaranteed safety. They found excuses to talk. They opened up easily. They projected kindness onto me simply because the shape of my face suggested it.

And the world followed suit. Men welcomed me. Strangers chatted with me as if I had earned their confidence. Neighbors waved first. I blended in effortlessly, slipping into crowds like someone who belonged everywhere. No suspicion. No hesitation. No glimpses of the shadow underneath. Then I noticed that I'm good at it, and everyone thinks I'm normal. Some people fake some of the human interactions, but I fake them all, and I fake them so well that no one doubts.

It is extraordinary how much evil can hide behind a pleasant expression. I became something people trusted without question. A friendly man. A likable presence. A harmless figure moving through their days. They never imagined the calculations behind my eyes, the quiet thrill in knowing how deeply they misunderstood me.

They will call me a monster when this all comes to light.
But I have always thought of myself more as a scientist who wants to prove his point to the M.R.I.S.

My curiosity does not resemble what normal people feel. It is sharper, colder, stripped of compassion. I study human weakness the way others examine chemical reactions, methodically, clinically. Their emotions, their hopes, their blind trust, these things interest me the same way an unusual specimen might interest a researcher.

The women who smile at me, who laugh a little too eagerly at harmless jokes, who drift closer because they sense strength and safety, they have no idea what stands in front of them. They see a man they could trust. A man they could confide in. A man who seems incapable of darkness.

They donâ€™t see the truth. They never do.

And that is why they will be horrified when everything finally collapses, when the mask falls away and the world sees the truth underneath the symmetry. It wonâ€™t be the revelations that break them. It will be the realization that someone they welcomed, someone they admired, someone they trusted, was studying them the entire time with eyes that felt nothing at all.


                `
            }
        ];

        // Archive Drive files (all deleted)
        const ARCHIVE_DRIVE_FILES = [
            { name: 'PROJECT_EX5_DATA.zip', status: 'DELETED' },
            { name: 'RESEARCH_NOTES_1999.dco', status: 'DELETED' },
            { name: 'EXPERIMENT_LOG_001.rtf', status: 'DELETED' },
            { name: 'SECURITY_FOOTAGE_10-13.mov', status: 'DELETED' },
            { name: 'AUDIO_RECORDING_SESSION7.wav', status: 'DELETED' },
            { name: 'EQUIPMENT_SCHEMATICS.dco', status: 'DELETED' },
            { name: 'PERSONNEL_FILES.rar', status: 'DELETED' },
            { name: 'FACILITY_BLUEPRINTS.exe', status: 'DELETED' },
            { name: 'HT_01.dco', status: 'DELETED' },
            { name: 'HT_02.dco', status: 'DELETED' },
            { name: 'HT_03.dco', status: 'DELETED' },
            { name: 'HT_04.dco', status: 'DELETED' }
        ];

        // ===============================
        // BOOT & INITIALIZATION
        // ===============================

   function startBoot() {
    // Skip the boot splash screen entirely
    const splash = document.getElementById('boot-splash');
    splash.style.display = 'none';
    document.getElementById('desktop').style.display = 'block';
    initializeDesktop();
    
    // Start background audio
    startBackgroundAudio();
}

function loginToSystem() {
    // This function is no longer needed since we skip the login screen
    // But we'll keep it for compatibility with the HTML onclick
    startBoot();
    playClickSound();
}

        function populateDocumentsGrid() {
            const grid = document.getElementById('documents-folder-grid');
            grid.innerHTML = '';
            
            // Show only first 16 documents in folder view
            DOCUMENTS.slice(0, 16).forEach((doc, idx) => {
                const item = document.createElement('div');
                item.className = 'documents-folder-item';
                item.innerHTML = `
                    <div class="documents-folder-icon">
                        <img src="https://files.catbox.moe/1jivm2.ico" alt="Document" class="documents-folder-img">
                    </div>
                    <div class="documents-folder-label">${doc.title.substring(0, 20)}...</div>
                `;
                item.onclick = () => openDocumentDetail(idx);
                grid.appendChild(item);
            });
        }

        function populateFileExplorer() {
            const thispcList = document.getElementById('thispc-files');
            const recycleList = document.getElementById('recyclebin-files');
            const archivedList = document.getElementById('archived-files');
            
            // This PC files - Removed Local Disk C: as requested
            [
                { name: 'ARCHIVE_DRIVE (D:)', icon: IMAGE_CONFIG.fileDriveIcon, action: 'archive-drive' },
                { name: 'MRIS_TERMINAL_SYSTEM_FILES', icon: IMAGE_CONFIG.fileWarningIcon, action: 'recovered-sector' }
            ].forEach(item => {
                const li = document.createElement('li');
                li.className = 'file-item';
                li.innerHTML = `<span class="file-item-icon"><img src="${item.icon}" alt="${item.name}" class="file-item-img"></span><span class="file-item-name">${item.name}</span>`;
                if (item.action === 'archive-drive') {
                    li.onclick = () => openArchiveDrive();
                } else if (item.action === 'recovered-sector') {
                    li.onclick = () => openRecoveredSector();
                }
                thispcList.appendChild(li);
            });
            
            // Recycle Bin files - Updated with requested files
            [
                { name: 'Emilia_Full_info.dco', status: 'DELETED' },
                { name: '11111.mp4', status: 'DELETED' },
                { name: 'record_1.wav', status: 'DELETED' },
                { name: 'record_2.wav', status: 'DELETED' },
                { name: 'record_3.wav', status: 'DELETED' },
                { name: 'record_4.wav', status: 'DELETED' },
                { name: 'record_5.wav', status: 'DELETED' },
                { name: 'record_6.wav', status: 'DELETED' },
                { name: 'record_7.wav', status: 'DELETED' },
                { name: 'record_8.wav', status: 'DELETED' },
                { name: 'record_9.wav', status: 'DELETED' },
                { name: 'record_10.wav', status: 'DELETED' },
                { name: 'record_11.wav', status: 'DELETED' },
                { name: 'record_12.wav', status: 'DELETED' },
                { name: 'record_13.wav', status: 'DELETED' },
                { name: 'record_14.wav', status: 'DELETED' },
                { name: 'record_15.wav', status: 'DELETED' },
                { name: 'record_16.wav', status: 'DELETED' },
                { name: 'record_17.wav', status: 'DELETED' },
                { name: 'record_18.wav', status: 'DELETED' },
                { name: 'record_19.wav', status: 'DELETED' },
                { name: 'record_20.wav', status: 'DELETED' },
                { name: 'record_21.wav', status: 'DELETED' },
                { name: 'Document_HT_05.txt', status: 'DELETED' },
                { name: 'Formula.dco', status: 'DELETED' },
                { name: 'Img.jpg', status: 'DELETED' },
                { name: 'Cmd.vfl', status: 'DELETED' }
            ].forEach(file => {
                const li = document.createElement('li');
                li.className = 'file-item';
                li.innerHTML = `<span class="file-item-icon"><img src="${IMAGE_CONFIG.fileDeletedIcon}" alt="Deleted File" class="file-item-img"></span><span class="file-item-name">[DELETED] ${file.name}</span>`;
                li.onclick = () => showBrokenFileError(file.name);
                recycleList.appendChild(li);
            });
            
            // Archived files - Empty as requested
            // No files to populate
        }

        function setupWindows() {
            document.querySelectorAll('.window').forEach(win => {
                makeDraggable(win);
                win.addEventListener('mousedown', function() {
                    bringToFront(this.id);
                });
            });
            
            // Also make the image viewer and cmd windows draggable
            const imageViewer = document.getElementById('image-viewer-window');
            makeDraggable(imageViewer);
            imageViewer.addEventListener('mousedown', function() {
                bringToFront(this.id);
            });
            
            const cmdWindow = document.getElementById('cmd-window');
            makeDraggable(cmdWindow);
            cmdWindow.addEventListener('mousedown', function() {
                bringToFront(this.id);
            });
            
            // Make text document window draggable
            const textDocWindow = document.getElementById('window-textdoc');
            makeDraggable(textDocWindow);
            textDocWindow.addEventListener('mousedown', function() {
                bringToFront(this.id);
            });
        }

        function makeDraggable(element) {
            let pos1 = 0, pos2 = 0, pos3 = 0, pos4 = 0;
            const titleBar = element.querySelector('.title-bar');
            
            if (titleBar) {
                titleBar.onmousedown = dragMouseDown;
            }
            
            function dragMouseDown(e) {
                e.preventDefault();
                pos3 = e.clientX;
                pos4 = e.clientY;
                document.onmouseup = closeDragElement;
                document.onmousemove = elementDrag;
            }
            
            function elementDrag(e) {
                e.preventDefault();
                pos1 = pos3 - e.clientX;
                pos2 = pos4 - e.clientY;
                pos3 = e.clientX;
                pos4 = e.clientY;
                element.style.top = (element.offsetTop - pos2) + "px";
                element.style.left = (element.offsetLeft - pos1) + "px";
            }
            
            function closeDragElement() {
                document.onmouseup = null;
                document.onmousemove = null;
            }
        }

        function bringToFront(windowId) {
            STATE.currentZIndex += 1;
            document.getElementById(windowId).style.zIndex = STATE.currentZIndex;
        }

        function openWindow(windowId) {
            const window = document.getElementById(windowId);
            if (window) {
                window.style.display = 'block';
                bringToFront(windowId);
            }
        }

        function closeWindow(windowId) {
            document.getElementById(windowId).style.display = 'none';
        }

        function minimizeWindow(windowId) {
            const win = document.getElementById(windowId);
            if (win.style.display === 'none') {
                win.style.display = 'block';
            } else {
                win.style.display = 'none';
            }
        }

        function toggleStartMenu() {
            const startMenu = document.getElementById('start-menu');
            if (startMenu.style.display === 'block') {
                startMenu.style.display = 'none';
            } else {
                startMenu.style.display = 'block';
                bringToFront('start-menu');
            }
        }

        function logoff() {
            alert('Logging off User_972...');
            toggleStartMenu();
        }

        function restart() {
            if (confirm('Are you sure you want to restart your computer?')) {
                alert('Restarting SYSTEM_98...');
                toggleStartMenu();
            }
        }

        function shutdown() {
            if (confirm('Are you sure you want to shut down your computer?')) {
                alert('Shutting down SYSTEM_98...');
                toggleStartMenu();
            }
        }

        function openDocumentDetail(index) {
            const doc = DOCUMENTS[index];
            const folderView = document.getElementById('documents-folder-view');
            const detailView = document.getElementById('documents-detail-view');
            const titleEl = document.getElementById('documents-detail-title');
            const descriptionEl = document.getElementById('documents-detail-description');
            const imagesContainer = document.getElementById('documents-detail-images');
            
            // Update detail panel
            titleEl.textContent = doc.title;
            descriptionEl.textContent = doc.content;
            
            // Clear and populate images (show up to 10 images)
            imagesContainer.innerHTML = '';
            const imagesToShow = doc.images ? doc.images.slice(0, 10) : [];
            imagesToShow.forEach((img, idx) => {
                const imgDiv = document.createElement('div');
                imgDiv.className = 'documents-detail-image';
                imgDiv.textContent = img;
                imgDiv.onclick = () => openImageInWindow(img, idx, doc.title, imagesToShow);
                imagesContainer.appendChild(imgDiv);
            });
            
            // Switch views
            folderView.classList.remove('active');
            detailView.classList.add('active');
        }

        function backToFolderView() {
            const folderView = document.getElementById('documents-folder-view');
            const detailView = document.getElementById('documents-detail-view');
            folderView.classList.add('active');
            detailView.classList.remove('active');
        }

        function openDocument(index) {
            const doc = DOCUMENTS[index];
            const viewer = document.getElementById('window-viewer');
            const title = document.getElementById('viewer-title');
            const content = document.getElementById('viewer-content');
            
            title.textContent = doc.title;
            
            let html = '<div style="padding: 8px;">';
            
            if (doc.images && doc.images.length > 0) {
                html += '<div class="section-header">ðŸ“· RECOVERED_IMAGES (' + doc.images.length + ')</div>';
                html += '<div class="image-grid">';
                doc.images.forEach((img, idx) => {
                    html += `<div class="image-frame" onclick="openImageInWindow('${img}', ${idx}, '${doc.title}', ${JSON.stringify(doc.images).replace(/'/g, "\\'")})">${img}</div>`;
                });
                html += '</div>';
            }
            
            html += '<div class="section-header">ðŸ“ COMPLETE_DOCUMENT_CONTENT</div>';
            html += `<div class="text-viewer">${doc.content}</div>`;
            html += '</div>';
            
            content.innerHTML = html;
            viewer.style.display = 'block';
            bringToFront('window-viewer');
        }

        function openHT05Image() {
            const imageViewer = document.getElementById('image-viewer-window');
            const imageTitle = document.getElementById('image-viewer-title');
            const imageDisplay = document.getElementById('image-display');
            const imageInfo = document.getElementById('image-info');
            
            imageTitle.textContent = 'Image Viewer - HT_05 Target';
            
            // Clear previous content and load real image
            imageDisplay.innerHTML = '';
            const img = document.createElement('img');
            img.src = "https://files.catbox.moe/40zba5.jpeg";
            img.alt = "HT_05 Target";
            img.className = 'real-image';
            imageDisplay.appendChild(img);
            
            imageInfo.textContent = 'HT_05 Target';
            
            imageViewer.style.display = 'block';
            bringToFront('image-viewer-window');
        }

        function openPaperImage() {
            const imageViewer = document.getElementById('image-viewer-window');
            const imageTitle = document.getElementById('image-viewer-title');
            const imageDisplay = document.getElementById('image-display');
            const imageInfo = document.getElementById('image-info');
            
            imageTitle.textContent = 'Image Viewer - Paper';
            
            // Clear previous content and load real image
            imageDisplay.innerHTML = '';
            const img = document.createElement('img');
            img.src = "https://files.catbox.moe/0uk3ci.jpeg";
            img.alt = "Paper";
            img.className = 'real-image';
            imageDisplay.appendChild(img);
            
            imageInfo.textContent = 'Paper';
            
            imageViewer.style.display = 'block';
            bringToFront('image-viewer-window');
        }

        function openTextDocument() {
    const textDocWindow = document.getElementById('window-textdoc');
    const textArea = document.getElementById('editable-text');
    
    // Reset zoom level
    textZoomLevel = 1;
    textArea.style.fontSize = '10px';
    
    textDocWindow.style.display = 'block';
    bringToFront('window-textdoc');
}
        function saveTextDocument() {
            alert('Text document saved successfully!');
        }

      function openImageInWindow(imageName, index, documentTitle, allImages) {
    const imageViewer = document.getElementById('image-viewer-window');
    const imageTitle = document.getElementById('image-viewer-title');
    const imageDisplay = document.getElementById('image-display');
    const imageInfo = document.getElementById('image-info');
    
    // Store current image data for navigation
    STATE.currentImageIndex = index;
    STATE.currentDocumentImages = allImages;
    STATE.currentDocumentTitle = documentTitle;
    
    imageTitle.textContent = `Image Viewer - ${documentTitle}`;
    
    // Clear previous content and load real image
    imageDisplay.innerHTML = '';
    const img = document.createElement('img');
    img.src = getImageUrl(imageName);
    img.alt = imageName;
    img.className = 'real-image zoomable-content';
    imageDisplay.appendChild(img);
    
    // Reset zoom level
    imageZoomLevel = 1;
    img.style.transform = 'scale(1)';
    
    imageInfo.textContent = `Image ${index + 1} of ${allImages.length}\n${imageName}\n(Zoom: 100%)`;
    
    imageViewer.style.display = 'block';
    bringToFront('image-viewer-window');
}

        function showBrokenFileError(filename) {
            const errorDialog = document.getElementById('error-dialog');
            const errorMessage = document.getElementById('error-message');
            
            errorMessage.innerHTML = `
                <strong>${filename}</strong><br><br>
                This file is corrupted or broken and cannot be opened.<br>
                The file may have been damaged during deletion or recovery.
            `;
            
            errorDialog.style.display = 'block';
            bringToFront('error-dialog');
        }

        function closeErrorDialog() {
            document.getElementById('error-dialog').style.display = 'none';
        }

        function openArchiveDrive() {
            const viewer = document.getElementById('window-viewer');
            const title = document.getElementById('viewer-title');
            const content = document.getElementById('viewer-content');
            
            title.textContent = 'ARCHIVE_DRIVE (D:) - DELETED FILES';
            
            let html = '<div style="padding: 8px;">';
            html += '<div class="hidden-files-warning">âš  ALL FILES IN THIS DRIVE HAVE BEEN DELETED</div>';
            html += '<div class="section-header">ðŸ—‚ï¸ DELETED FILES</div>';
            html += '<ul class="file-list">';
            
            ARCHIVE_DRIVE_FILES.forEach(file => {
                html += `<li class="file-item" onclick="showBrokenFileError('${file.name}')">
                    <span class="file-item-icon"><img src="${IMAGE_CONFIG.fileDeletedIcon}" alt="Deleted File" class="file-item-img"></span>
                    <span class="file-item-name">${file.name} [${file.status}]</span>
                </li>`;
            });
            
            html += '</ul>';
            html += '</div>';
            
            content.innerHTML = html;
            viewer.style.display = 'block';
            bringToFront('window-viewer');
        }

        function openRecoveredSector() {
            const viewer = document.getElementById('window-viewer');
            const title = document.getElementById('viewer-title');
            const content = document.getElementById('viewer-content');
            
            title.textContent = 'MRIS TERMINAL SYSTEM';
            
            let html = '<div style="padding: 8px;">';
            html += '<div class="section-header">MRIS TERMINAL SYSTEM</div>';
            html += '<div class="text-viewer">';
            html += 'DEVICE: MRIS_SQS_DEVICE_091\n';
            html += 'ID_NAME: user_972_00192348093458\n';
            html += '</div>';
            html += '<div style="text-align: center; margin-top: 20px;">';
            html += '<button class="button" onclick="redirectToMRIS()" style="padding: 8px 16px; font-size: 12px;">OPEN MRIS SYSTEM</button>';
            html += '</div>';
            html += '</div>';
            
            content.innerHTML = html;
            viewer.style.display = 'block';
            bringToFront('window-viewer');
        }

        function redirectToMRIS() { 
            // Redirect to # without warning
            window.location.href = 'https://obscure265-cloud.github.io/MRIS-TERMINAL-SYSTEM/';
        }

        // Function to update user photo
        function updateUserPhoto(imageUrl) {
            const userPhoto = document.getElementById('user-photo');
            userPhoto.innerHTML = `<img src="${imageUrl}" alt="User Photo" class="user-photo-img">`;
        }

        // ===============================
        // TERMINAL FUNCTIONALITY
        // ===============================

        function openTerminal() {
            const cmdWindow = document.getElementById('cmd-window');
            const cmdContent = document.getElementById('cmd-content');
            
            // Terminal content with code about MRIS upload
            const terminalContent = `
C:\\> mris_upload.exe --init
Initializing MRIS Terminal Connection...
Connection established: MRIS_SERVER_01
Authentication: User_972
Access Level: ADMIN

C:\\> upload --files "C:\\Documents\\*.*" --target "MRIS_SYSTEM"
Scanning directory: C:\\Documents\\

Found files:
- INITIAL_TRANSMISSION_LOG_19.doc
- EXPERIMNTAL_LOGS.doc
- FORMULA.doc
- Anatoly_Personal_Notes.pdf
- Null_pictures.zip

C:\\> upload --file "INITIAL_TRANSMISSION_LOG_19.doc" --target "MRIS_SYSTEM"
Uploading: INITIAL_TRANSMISSION_LOG_19.doc
Progress: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
Status: SUCCESS
File uploaded to: MRIS://HT_05/

C:\\> upload --file "EXPERIMNTAL_LOGS.doc" --target "MRIS_SYSTEM"
Uploading: EXPERIMNTAL_LOGS.doc
Progress: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
Status: SUCCESS
File uploaded to: MRIS://HT_05/

C:\\> upload --file "FORMULA.doc" --target "MRIS_SYSTEM"
Uploading: FORMULA.doc
Progress: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
Status: SUCCESS
File uploaded to: MRIS://HT_05/

C:\\> upload --file "Anatoly_Personal_Notes.pdf" --target "MRIS_SYSTEM"
Uploading: Anatoly_Personal_Notes.pdf
Progress: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
Status: SUCCESS
File uploaded to: MRIS://HT_05/

C:\\> upload --file "pictures.zip" --target "MRIS_SYSTEM"
Uploading: Null_pictures.zip
Progress: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
Status: SUCCESS
File uploaded to: MRIS://HT_05/

C:\\> mris_sync --verify
Verifying upload integrity...
Checking: INITIAL_TRANSMISSION_LOG_19.doc... OK
Checking: EXPERIMNTAL_LOGS.doc... OK
Checking: FORMULA.doc... OK
Checking: Anatoly_Personal_Notes.pdf... OK
Checking: pictures.zip... OK

All files successfully uploaded to MRIS Terminal System.
Upload Summary:
- 3 document files
- 1 pdf file
- 1 rar archive
Total size: 39 MB
Transfer rate: 0.02 MB/s

C:\\> mris_encrypt --level MAXIMUM --target "MRIS://HT_05/"
Encrypting archive files with AES-256...
Progress: [â–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆâ–ˆ] 100%
Encryption complete. All files secured.

C:\\> mris_log --entry "#HT05-2017 | Compiled by: User_972 (Uploaded)."
Log entry created: 2025-06-15 00:32:17
successfully uploaded all documents and Anatoly's Personal Notes to MRIS Terminal System.

C:\\> disconnect
Disconnecting from MRIS_SERVER_0972...
Connection terminated.

C:\\> --delete /USI918834_oU9M9l9i9JH24.cmd/
Successfully Deleted USI918834_oU9M9l9i9JH24.cmd.

C:\\> --shutdown
Shutting MRIS TERMINAL... (%100)
Successfully Shutting MRIS TERMINAL.

C:\\> <span class="cmd-prompt">_<span class="cmd-typing"></span></span>
            `;
            
            cmdContent.innerHTML = terminalContent;
            cmdWindow.style.display = 'block';
            bringToFront('cmd-window');
            
            // Auto-scroll to bottom
            cmdContent.scrollTop = cmdContent.scrollHeight;
        }

        window.addEventListener('load', startBoot);
      function openHT05Image() {
    const imageViewer = document.getElementById('image-viewer-window');
    const imageTitle = document.getElementById('image-viewer-title');
    const imageDisplay = document.getElementById('image-display');
    const imageInfo = document.getElementById('image-info');
    
    imageTitle.textContent = 'Image Viewer - HT_05 Target';
    
    // Clear previous content and load real image
    imageDisplay.innerHTML = '';
    const img = document.createElement('img');
    img.src = "https://files.catbox.moe/40zba5.jpeg";
    img.alt = "HT_05 Target";
    img.className = 'real-image zoomable-content';
    img.style.maxWidth = '90%';
    img.style.maxHeight = '90%';
    imageDisplay.appendChild(img);
    
    // Reset zoom level
    imageZoomLevel = 1;
    img.style.transform = 'scale(1)';
    
    imageInfo.textContent = 'HT_05 Target\n(Zoom: 100%)';
    
    imageViewer.style.display = 'block';
    bringToFront('image-viewer-window');
}

function openPaperImage() {
    const imageViewer = document.getElementById('image-viewer-window');
    const imageTitle = document.getElementById('image-viewer-title');
    const imageDisplay = document.getElementById('image-display');
    const imageInfo = document.getElementById('image-info');
    
    imageTitle.textContent = 'Image Viewer - Paper';
    
    // Clear previous content and load real image
    imageDisplay.innerHTML = '';
    const img = document.createElement('img');
    img.src = "https://files.catbox.moe/0uk3ci.jpeg";
    img.alt = "Paper";
    img.className = 'real-image zoomable-content';
    imageDisplay.appendChild(img);
    
    // Reset zoom level
    imageZoomLevel = 1;
    img.style.transform = 'scale(1)';
    
    imageInfo.textContent = 'Paper\n(Zoom: 100%)';
    
    imageViewer.style.display = 'block';
    bringToFront('image-viewer-window');
}
document.addEventListener('contextmenu', function(e) {
    e.preventDefault();
    return false;
});

// Disable F12 key
document.addEventListener('keydown', function(e) {
    if (e.key === 'F12') {
        e.preventDefault();
        return false;
    }
    
    // Disable Ctrl+Shift+I (Chrome, Firefox, Edge)
    if (e.ctrlKey && e.shiftKey && e.key === 'I') {
        e.preventDefault();
        return false;
    }
    
    // Disable Ctrl+Shift+J (Chrome)
    if (e.ctrlKey && e.shiftKey && e.key === 'J') {
        e.preventDefault();
        return false;
    }
    
    // Disable Ctrl+U (View source)
    if (e.ctrlKey && e.key === 'u') {
        e.preventDefault();
        return false;
    }
});

// Additional protection against devtools opening
let devToolsOpen = false;
setInterval(function() {
    const widthThreshold = window.outerWidth - window.innerWidth > 160;
    const heightThreshold = window.outerHeight - window.innerHeight > 160;
    
    if ((widthThreshold || heightThreshold) && !devToolsOpen) {
        devToolsOpen = true;
        // You can add additional actions here if devtools is detected
        console.log('Developer tools detected');
    }
}, 1000);

// ===============================
// IMPROVED ZOOM FUNCTIONALITY
// ===============================
let imageZoomLevel = 1;
let textZoomLevel = 1;
const MAX_ZOOM_LEVEL = 3;
const MIN_ZOOM_LEVEL = 0.1;

function zoomInImage() {
    const imageDisplay = document.getElementById('image-display');
    const images = imageDisplay.querySelectorAll('img');
    
    if (imageZoomLevel < MAX_ZOOM_LEVEL) {
        imageZoomLevel += 0.1;
        images.forEach(img => {
            // Use actual width/height scaling instead of transform
            const originalWidth = img.naturalWidth || img.width;
            const originalHeight = img.naturalHeight || img.height;
            
            img.style.width = (originalWidth * imageZoomLevel) + 'px';
            img.style.height = (originalHeight * imageZoomLevel) + 'px';
            img.style.maxWidth = 'none';
            img.style.maxHeight = 'none';
        });
        updateImageZoomInfo();
    }
}

function zoomOutImage() {
    const imageDisplay = document.getElementById('image-display');
    const images = imageDisplay.querySelectorAll('img');
    
    if (imageZoomLevel > MIN_ZOOM_LEVEL) {
        imageZoomLevel -= 0.1;
        images.forEach(img => {
            // Use actual width/height scaling instead of transform
            const originalWidth = img.naturalWidth || img.width;
            const originalHeight = img.naturalHeight || img.height;
            
            img.style.width = (originalWidth * imageZoomLevel) + 'px';
            img.style.height = (originalHeight * imageZoomLevel) + 'px';
            img.style.maxWidth = 'none';
            img.style.maxHeight = 'none';
        });
        updateImageZoomInfo();
    }
}

function resetImageZoom() {
    const imageDisplay = document.getElementById('image-display');
    const images = imageDisplay.querySelectorAll('img');
    
    imageZoomLevel = 1;
    images.forEach(img => {
        // Reset to original dimensions
        img.style.width = '';
        img.style.height = '';
        img.style.maxWidth = 'none';
        img.style.maxHeight = 'none';
        
        // Reset scroll position
        imageDisplay.scrollTop = 0;
        imageDisplay.scrollLeft = 0;
    });
    
    updateImageZoomInfo();
}

// Update the openImageInWindow function to remove constraints
function openImageInWindow(imageName, index, documentTitle, allImages) {
    const imageViewer = document.getElementById('image-viewer-window');
    const imageTitle = document.getElementById('image-viewer-title');
    const imageDisplay = document.getElementById('image-display');
    const imageInfo = document.getElementById('image-info');
    
    // Store current image data for navigation
    STATE.currentImageIndex = index;
    STATE.currentDocumentImages = allImages;
    STATE.currentDocumentTitle = documentTitle;
    
    imageTitle.textContent = `Image Viewer - ${documentTitle}`;
    
    // Clear previous content and load real image
    imageDisplay.innerHTML = '';
    const img = document.createElement('img');
    img.src = getImageUrl(imageName);
    img.alt = imageName;
    img.className = 'real-image zoomable-content';
    
    // Remove any size constraints
    img.style.maxWidth = 'none';
    img.style.maxHeight = 'none';
    
    // Wait for image to load before setting dimensions
    img.onload = function() {
        // Set initial dimensions
        img.style.width = img.naturalWidth + 'px';
        img.style.height = img.naturalHeight + 'px';
    };
    
    imageDisplay.appendChild(img);
    
    // Reset zoom level
    imageZoomLevel = 1;
    
    imageInfo.textContent = `Image ${index + 1} of ${allImages.length}\n${imageName}\n(Zoom: 100%)`;
    
    imageViewer.style.display = 'block';
    bringToFront('image-viewer-window');
}

function updateImageZoomInfo() {
    const imageInfo = document.getElementById('image-info');
    const currentText = imageInfo.textContent.split('\n')[0];
    imageInfo.textContent = `${currentText}\n(Zoom: ${Math.round(imageZoomLevel * 100)}%)`;
}
// ===============================
// CONTEXT MENU FUNCTIONALITY
// ===============================

let contextMenu = null;

function initializeContextMenu() {
    contextMenu = document.getElementById('context-menu');
    
    // Add context menu event listener to the desktop
    document.getElementById('desktop').addEventListener('contextmenu', function(e) {
        e.preventDefault();
        showContextMenu(e.clientX, e.clientY);
        return false;
    });
    
    // Hide context menu when clicking elsewhere
    document.addEventListener('click', function(e) {
        if (contextMenu && !contextMenu.contains(e.target)) {
            hideContextMenu();
        }
    });
    
    // Hide context menu when pressing Escape
    document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && contextMenu.style.display === 'block') {
            hideContextMenu();
        }
    });
}

function showContextMenu(x, y) {
    if (!contextMenu) return;
    
    // Position the context menu
    contextMenu.style.left = x + 'px';
    contextMenu.style.top = y + 'px';
    contextMenu.style.display = 'block';
    
    // Ensure it stays within viewport
    const rect = contextMenu.getBoundingClientRect();
    if (rect.right > window.innerWidth) {
        contextMenu.style.left = (window.innerWidth - rect.width) + 'px';
    }
    if (rect.bottom > window.innerHeight) {
        contextMenu.style.top = (window.innerHeight - rect.height) + 'px';
    }
    
    bringToFront('context-menu');
}

function hideContextMenu() {
    if (contextMenu) {
        contextMenu.style.display = 'none';
    }
}

function refreshDesktop() {
    // Simulate refresh by closing and reopening windows
    document.querySelectorAll('.window').forEach(win => {
        if (win.style.display === 'block') {
            win.style.display = 'none';
            setTimeout(() => {
                win.style.display = 'block';
                bringToFront(win.id);
            }, 100);
        }
    });
}

function copyToClipboard() {
    // Get selected text or default message
    const selectedText = window.getSelection().toString();
    const textToCopy = selectedText || 'No text selected';
    
    // Use modern clipboard API if available
    if (navigator.clipboard && window.isSecureContext) {
        navigator.clipboard.writeText(textToCopy).then(() => {
            console.log('Text copied to clipboard');
        }).catch(err => {
            console.error('Failed to copy text: ', err);
            fallbackCopyToClipboard(textToCopy);
        });
    } else {
        fallbackCopyToClipboard(textToCopy);
    }
}

function fallbackCopyToClipboard(text) {
    // Fallback method for older browsers
    const textArea = document.createElement('textarea');
    textArea.value = text;
    textArea.style.position = 'fixed';
    textArea.style.opacity = '0';
    document.body.appendChild(textArea);
    textArea.select();
    try {
        document.execCommand('copy');
        console.log('Text copied to clipboard (fallback)');
    } catch (err) {
        console.error('Fallback copy failed: ', err);
    }
    document.body.removeChild(textArea);
}

function pasteFromClipboard() {
    // Show message since we can't directly access clipboard for security reasons
    alert('Paste functionality is limited in browsers for security reasons. Use Ctrl+V to paste text.');
}

function createNewTextDocument() {
    // Create a new text document icon on the desktop
    const desktop = document.getElementById('desktop');
    const existingIcons = document.querySelectorAll('.desktop-icon');
    
    // Find a position that doesn't overlap with existing icons
    let topPosition = 10;
    let leftPosition = 100;
    
    // Simple algorithm to find empty space
    for (let i = 0; i < 20; i++) {
        const potentialTop = 10 + (i * 100);
        let positionOccupied = false;
        
        existingIcons.forEach(icon => {
            const rect = icon.getBoundingClientRect();
            if (Math.abs(rect.top - potentialTop) < 80) {
                positionOccupied = true;
            }
        });
        
        if (!positionOccupied) {
            topPosition = potentialTop;
            break;
        }
    }
    
    // Create the new icon
    const newIcon = document.createElement('div');
    newIcon.className = 'desktop-icon';
    newIcon.style.top = topPosition + 'px';
    newIcon.style.left = leftPosition + 'px';
    newIcon.innerHTML = `
        <div class="desktop-icon-image">
            <img src="https://files.catbox.moe/cgqeqj.ico" alt="New Text Document" class="desktop-icon-img">
        </div>
        <div class="desktop-icon-label">New Text Document.txt</div>
    `;
    
    // Add click functionality
    newIcon.onclick = function() {
        openNewTextDocument();
        playClickSound();
    };
    
    // Add to desktop
    desktop.appendChild(newIcon);
}

function openNewTextDocument() {
    const textDocWindow = document.getElementById('window-textdoc');
    const textArea = document.getElementById('editable-text');
    
    // Update window title and content for new document
    const titleBar = textDocWindow.querySelector('.title-bar-text');
    titleBar.innerHTML = '<img src="https://files.catbox.moe/cgqeqj.ico" alt="Text Document" class="title-bar-img">New Text Document.txt';
    
    // Clear the text area
    textArea.value = '';
    
    // Show the window
    textDocWindow.style.display = 'block';
    bringToFront('window-textdoc');
}

// Update the initializeDesktop function to include context menu initialization
function initializeDesktop() {
    populateDocumentsGrid();
    populateFileExplorer();
    setupWindows();
    initializeClock();
    initializeContextMenu(); // Add this line
    
    // Close start menu when clicking outside
    document.addEventListener('click', function(event) {
        const startMenu = document.getElementById('start-menu');
        const startButton = document.getElementById('start-button');
        
        if (!startMenu.contains(event.target) && !startButton.contains(event.target)) {
            startMenu.style.display = 'none';
        }
    });
}
// ===============================
// TEXT ZOOM FUNCTIONALITY
// ===============================

function zoomInText() {
    const textArea = document.getElementById('editable-text');
    
    if (textZoomLevel < MAX_ZOOM_LEVEL) {
        textZoomLevel += 0.1;
        textArea.style.fontSize = (10 * textZoomLevel) + 'px';
        updateTextZoomInfo();
    }
}

function zoomOutText() {
    const textArea = document.getElementById('editable-text');
    
    if (textZoomLevel > MIN_ZOOM_LEVEL) {
        textZoomLevel -= 0.1;
        textArea.style.fontSize = (10 * textZoomLevel) + 'px';
        updateTextZoomInfo();
    }
}

function resetTextZoom() {
    const textArea = document.getElementById('editable-text');
    
    textZoomLevel = 1;
    textArea.style.fontSize = '10px';
    updateTextZoomInfo();
}

function updateTextZoomInfo() {
    // Optional: You could add a zoom indicator for text if desired
    console.log('Text (zoom: ' + Math.round(textZoomLevel * 100) + '%)');
}

window.addEventListener('load', function() {
    // Skip boot screen and go directly to desktop
    document.getElementById('desktop').style.display = 'block';
    initializeDesktop();
    startBackgroundAudio();
    
    // Set default volumes
    setHumVolume(3);
    setClickVolume(100);
});

        // ===============================
        // MOBILE-SPECIFIC FUNCTIONALITY
        // ===============================
        
        // Check if device is mobile
        function isMobileDevice() {
            return (typeof window.orientation !== "undefined") || (navigator.userAgent.indexOf('IEMobile') !== -1) || 
                   (window.innerWidth <= 768);
        }
        
        // Mobile-optimized document detail view
        function openDocumentDetail(index) {
            const doc = DOCUMENTS[index];
            const folderView = document.getElementById('documents-folder-view');
            const detailView = document.getElementById('documents-detail-view');
            const titleEl = document.getElementById('documents-detail-title');
            const descriptionEl = document.getElementById('documents-detail-description');
            const imagesContainer = document.getElementById('documents-detail-images');
            
            // Update detail panel
            titleEl.textContent = doc.title;
            descriptionEl.textContent = doc.content;
            
            // Clear and populate images
            imagesContainer.innerHTML = '';
            const imagesToShow = doc.images ? doc.images.slice(0, 10) : [];
            
            if (isMobileDevice()) {
                // Mobile layout: images in a grid at the top
                imagesToShow.forEach((img, idx) => {
                    const imgDiv = document.createElement('div');
                    imgDiv.className = 'documents-detail-image';
                    
                    // Create image element for mobile
                    const imgElement = document.createElement('img');
                    imgElement.src = getImageUrl(img);
                    imgElement.alt = img;
                    imgElement.style.width = '100%';
                    imgElement.style.height = '100%';
                    imgElement.style.objectFit = 'cover';
                    
                    imgDiv.appendChild(imgElement);
                    imgDiv.onclick = () => openImageInWindow(img, idx, doc.title, imagesToShow);
                    imagesContainer.appendChild(imgDiv);
                });
            } else {
                // Desktop layout: text labels only
                imagesToShow.forEach((img, idx) => {
                    const imgDiv = document.createElement('div');
                    imgDiv.className = 'documents-detail-image';
                    imgDiv.textContent = img;
                    imgDiv.onclick = () => openImageInWindow(img, idx, doc.title, imagesToShow);
                    imagesContainer.appendChild(imgDiv);
                });
            }
            
            // Switch views
            folderView.classList.remove('active');
            detailView.classList.add('active');
            
            // Scroll to top on mobile
            if (isMobileDevice()) {
                detailView.scrollTop = 0;
            }
        }
        
        // Mobile-optimized window positioning
        function openWindow(windowId) {
            const window = document.getElementById(windowId);
            if (window) {
                window.style.display = 'block';
                
                // Center on mobile devices
                if (isMobileDevice()) {
                    window.style.top = '50%';
                    window.style.left = '50%';
                    window.style.transform = 'translate(-50%, -50%)';
                }
                
                bringToFront(windowId);
            }
        }
        
        // Initialize mobile-specific features
        function initializeMobileFeatures() {
            if (isMobileDevice()) {
                console.log("Mobile device detected - initializing mobile features");
                
                // Add mobile-specific event listeners for better touch handling
                document.addEventListener('touchstart', function() {}, {passive: true});
                
                // Improve touch scrolling
                document.querySelectorAll('.window-content, .text-viewer, .start-menu-content, #desktop').forEach(el => {
                    el.style.webkitOverflowScrolling = 'touch';
                });
                
                // Add touch event handlers for all interactive elements
                document.querySelectorAll('.desktop-icon, .file-item, .start-menu-item, .title-bar-button, .button, .audio-button, .context-menu-item, .zoom-button').forEach(el => {
                    // Remove any existing click handlers that might interfere
                    const oldOnClick = el.onclick;
                    
                    // Add touch event
                    el.addEventListener('touchend', function(e) {
                        e.preventDefault();
                        if (oldOnClick) {
                            oldOnClick.call(this, e);
                        } else if (this.onclick) {
                            this.onclick(e);
                        }
                        playClickSound();
                    }, {passive: false});
                });
                
                // Special handling for desktop icons
                document.querySelectorAll('.desktop-icon').forEach(icon => {
                    icon.addEventListener('touchend', function(e) {
                        e.preventDefault();
                        const clickHandler = this.onclick;
                        if (clickHandler) {
                            clickHandler.call(this, e);
                        }
                        playClickSound();
                    }, {passive: false});
                });
                
                // Handle window dragging on mobile
                document.querySelectorAll('.window').forEach(window => {
                    const titleBar = window.querySelector('.title-bar');
                    if (titleBar) {
                        let startX, startY, initialX, initialY;
                        
                        titleBar.addEventListener('touchstart', function(e) {
                            const touch = e.touches[0];
                            startX = touch.clientX;
                            startY = touch.clientY;
                            initialX = window.offsetLeft;
                            initialY = window.offsetTop;
                            bringToFront(window.id);
                        }, {passive: true});
                        
                        titleBar.addEventListener('touchmove', function(e) {
                            if (startX === undefined || startY === undefined) return;
                            
                            const touch = e.touches[0];
                            const deltaX = touch.clientX - startX;
                            const deltaY = touch.clientY - startY;
                            
                            window.style.left = (initialX + deltaX) + 'px';
                            window.style.top = (initialY + deltaY) + 'px';
                        }, {passive: true});
                        
                        titleBar.addEventListener('touchend', function() {
                            startX = startY = initialX = initialY = undefined;
                        }, {passive: true});
                    }
                });
            }
        }
        
        // Rearrange desktop icons for mobile
        function arrangeDesktopIconsForMobile() {
            if (!isMobileDevice()) return;
            
            const desktop = document.getElementById('desktop');
            const icons = Array.from(desktop.querySelectorAll('.desktop-icon'));
            
            // Clear any existing positioning
            icons.forEach(icon => {
                icon.style.position = 'relative';
                icon.style.top = 'auto';
                icon.style.left = 'auto';
            });
            
            console.log("Desktop icons arranged for mobile view");
        }
        
        // Update the initializeDesktop function to include mobile features
        function initializeDesktop() {
            populateDocumentsGrid();
            populateFileExplorer();
            setupWindows();
            initializeClock();
            initializeContextMenu();
            
            // Mobile-specific initialization
            if (isMobileDevice()) {
                initializeMobileFeatures();
                arrangeDesktopIconsForMobile();
            }
            
            // Close start menu when clicking outside
            document.addEventListener('click', function(event) {
                const startMenu = document.getElementById('start-menu');
                const startButton = document.getElementById('start-button');
                
                if (startMenu && startButton && !startMenu.contains(event.target) && !startButton.contains(event.target)) {
                    startMenu.style.display = 'none';
                }
            });
            
            // Also close start menu when tapping outside on mobile
            if (isMobileDevice()) {
                document.addEventListener('touchend', function(event) {
                    const startMenu = document.getElementById('start-menu');
                    const startButton = document.getElementById('start-button');
                    
                    if (startMenu && startButton && !startMenu.contains(event.target) && !startButton.contains(event.target)) {
                        startMenu.style.display = 'none';
                    }
                });
            }
        }
        
        // Handle window resize for responsive behavior
        window.addEventListener('resize', function() {
            if (isMobileDevice()) {
                arrangeDesktopIconsForMobile();
            }
        });
    </script>
</body>
</html>
